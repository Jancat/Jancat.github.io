<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>é”®è½äº‘èµ·</title>
    <link>https://jancat.github.io/</link>
    <description>Recent content on é”®è½äº‘èµ·</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Mon, 19 Aug 2019 21:18:32 +0800</lastBuildDate>
    
        <atom:link href="https://jancat.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useMemo å’Œ useCallback</title>
      <link>https://jancat.github.io/post/2019/translation-usememo-and-usecallback/</link>
      <pubDate>Mon, 19 Aug 2019 21:18:32 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2019/translation-usememo-and-usecallback/</guid>
      
        <description>&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ï¼š&lt;a href=&#34;https://kentcdodds.com/blog/usememo-and-usecallback&#34;&gt;When to useMemo and useCallback&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ€§èƒ½ä¼˜åŒ–æ€»æ˜¯ä¼šæœ‰æˆæœ¬ï¼Œä½†å¹¶ä¸æ€»æ˜¯å¸¦æ¥å¥½å¤„ã€‚æˆ‘ä»¬æ¥è°ˆè°ˆ &lt;code&gt;useMemo&lt;/code&gt; å’Œ &lt;code&gt;useCallback&lt;/code&gt; çš„æˆæœ¬å’Œæ”¶ç›Šã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæ˜¯ä¸€ä¸ªç³–æœæå”®è´§æœºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190730212055.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ï¼ˆåŸæ–‡ä¸­å¯ç‚¹å‡»äº¤äº’ï¼Œç‚¹å‡» &amp;ldquo;grab&amp;rdquo; æŒ‰é’®åâ€œæå–â€å¯¹åº”çš„ç³–æœï¼Œå¯¹åº”é¡¹ä¼šä»é¡µé¢åˆ é™¤ï¼›å…¨éƒ¨æå–å®Œåä¼šå‡ºç° &amp;ldquo;refill&amp;rdquo; æŒ‰é’®ï¼Œç‚¹å‡»é‡ç½®æ‰€æœ‰ç³–æœï¼‰&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯å®ƒçš„å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CandyDispenser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;initialCandies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;snickers&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;skittles&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;twix&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;milky way&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;initialCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;h1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Candy&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Dispenser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;h1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Available&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{()&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;initialCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;refill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{candy}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{()&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;grab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;))}&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç°åœ¨æˆ‘æƒ³é—®ä½ ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨ç»§ç»­ä¹‹å‰å¥½å¥½æƒ³æƒ³ã€‚æˆ‘è¦åšä¸€ä¸ªæ”¹å˜ï¼Œæˆ‘æƒ³è®©ä½ å‘Šè¯‰æˆ‘å“ªä¸€ä¸ªä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ç‰¹å¾ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å”¯ä¸€è¦æ”¹å˜çš„æ˜¯åœ¨ &lt;code&gt;React.useCallback&lt;/code&gt; é‡ŒåŒ…è£¹ &lt;code&gt;dispense&lt;/code&gt; å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ˜¯&lt;strong&gt;åŸæ¥&lt;/strong&gt;çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘çš„é—®é¢˜æ˜¯ï¼Œåœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œå“ªä¸€ä¸ªå¯¹æ€§èƒ½æ›´å¥½ï¼ŸåŸæ¥çš„è¿˜æ˜¯ &lt;code&gt;useCallback&lt;/code&gt;ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ é€‰æ‹©çš„æ˜¯ &lt;code&gt;useCallback&lt;/code&gt;ï¼Œå†å¥½å¥½æ€è€ƒä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨åŸæ¥çš„ä»£ç æ€§èƒ½ä¼šæ›´å¥½ğŸ˜‰&lt;/p&gt;

&lt;h2 id=&#34;ä¸ºä»€ä¹ˆ-usecallback-æ›´ç³Ÿç³•&#34;&gt;ä¸ºä»€ä¹ˆ useCallback æ›´ç³Ÿç³•ï¼Ÿï¼&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬å¬åˆ°å¾ˆå¤šä½ åº”è¯¥ä½¿ç”¨ &lt;code&gt;React.useCallback&lt;/code&gt; æ¥æé«˜æ€§èƒ½ï¼Œå¹¶ä¸”â€œå†…è”å‡½æ•°å¯èƒ½ä¼šå¯¹æ€§èƒ½é€ æˆé—®é¢˜â€ï¼Œé‚£ä¹ˆä¸ä½¿ç”¨&lt;code&gt;callCallback&lt;/code&gt; æ˜¯å¦‚ä½•å˜å¾—æ›´å¥½çš„ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä»æˆ‘ä»¬çš„å…·ä½“ä¾‹å­ä¸­é€€åä¸€æ­¥ï¼Œç”šè‡³ä»Reacté‚£é‡Œè€ƒè™‘ä¸€ä¸‹ï¼š&lt;strong&gt;æ‰§è¡Œçš„æ¯è¡Œä»£ç éƒ½æœ‰æˆæœ¬&lt;/strong&gt;ã€‚è®©æˆ‘ç¨å¾®é‡æ„ä¸€ä¸‹ &lt;code&gt;useCallback&lt;/code&gt; çš„ä¾‹å­æ¥æ›´æ¸…æ¥šåœ°è¯´æ˜äº‹æƒ…ï¼ˆæ²¡æœ‰å®é™…çš„æ”¹å˜ï¼Œåªæ˜¯ç§»åŠ¨ä¸‹ä»£ç ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispenseCallback&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ˜¯åŸæ¥çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispense&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;setCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allCandies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;candy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ³¨æ„åˆ°äº†å—ï¼Ÿè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ diffï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;const dispense = candy =&amp;gt; {
    setCandies(allCandies =&amp;gt; allCandies.filter(c =&amp;gt; c !== candy))
  }
&lt;span class=&#34;gi&#34;&gt;+ const dispenseCallback = React.useCallback(dispense, [])
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ˜¯çš„ï¼Œé™¤äº†&lt;code&gt;useCallback&lt;/code&gt;ç‰ˆæœ¬åšäº†æ›´å¤šçš„å·¥ä½œä¹‹å¤–ï¼Œå®ƒä»¬å®Œå…¨ç›¸åŒã€‚ æˆ‘ä»¬ä¸ä»…éœ€è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜è¦å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼ˆ&lt;code&gt;[]&lt;/code&gt;ï¼‰å¹¶è°ƒç”¨ &lt;code&gt;React.useCallback&lt;/code&gt;ï¼Œå®ƒæœ¬èº«ä¼šè®¾ç½®å±æ€§å’Œè¿è¡Œé€»è¾‘è¡¨è¾¾å¼ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒJavaScript å¿…é¡»åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­ä¸ºå‡½æ•°å®šä¹‰åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”æ ¹æ® &lt;code&gt;useCallback&lt;/code&gt; çš„å®ç°æ–¹å¼ï¼Œä½ å¯èƒ½ä¼šè·å¾—æ›´å¤šçš„å‡½æ•°å®šä¹‰å†…å­˜åˆ†é…ï¼ˆå®é™…æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œä½†é‡ç‚¹è¿˜åœ¨è¿™é‡Œï¼‰ã€‚è¿™å°±æ˜¯æˆ‘è¯•å›¾é€šè¿‡æˆ‘çš„ Twitter æ°‘æ„è°ƒæŸ¥å¾—åˆ°çš„ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190730215347.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘è¿˜æƒ³æä¸€ä¸‹ï¼Œåœ¨ç»„ä»¶çš„ç¬¬äºŒæ¬¡æ¸²æŸ“ä¸­ï¼ŒåŸæ¥çš„ &lt;code&gt;dispense&lt;/code&gt; å‡½æ•°è¢«åƒåœ¾æ”¶é›†ï¼ˆé‡Šæ”¾å†…å­˜ç©ºé—´ï¼‰ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;dispense&lt;/code&gt; å‡½æ•°ã€‚ ä½†æ˜¯ä½¿ç”¨ &lt;code&gt;useCallback&lt;/code&gt; æ—¶ï¼ŒåŸæ¥çš„ &lt;code&gt;dispense&lt;/code&gt; å‡½æ•°ä¸ä¼šè¢«åƒåœ¾æ”¶é›†ï¼Œå¹¶ä¸”ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;dispense&lt;/code&gt; å‡½æ•°ï¼Œæ‰€ä»¥ä»å†…å­˜çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¼šå˜å¾—æ›´ç³Ÿã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºä¸€ä¸ªç›¸å…³çš„è¯´æ˜ï¼Œå¦‚æœä½ æœ‰å…¶å®ƒä¾èµ–ï¼Œé‚£ä¹ˆReactå¾ˆå¯èƒ½ä¼šæŒ‚èµ·å¯¹å‰é¢å‡½æ•°çš„å¼•ç”¨ï¼Œå› ä¸º &lt;strong&gt;memoization&lt;/strong&gt; é€šå¸¸æ„å‘³ç€æˆ‘ä»¬ä¿ç•™æ—§å€¼çš„å‰¯æœ¬ï¼Œä»¥ä¾¿åœ¨æˆ‘ä»¬è·å¾—ä¸å…ˆå‰ç»™å‡ºçš„ç›¸åŒä¾èµ–çš„æƒ…å†µä¸‹è¿”å›ã€‚ ç‰¹åˆ«èªæ˜çš„ä½ ä¼šæ³¨æ„åˆ°ï¼Œè¿™æ„å‘³ç€Reactè¿˜å¿…é¡»æŒ‚åœ¨å¯¹è¿™ä¸ªç­‰å¼æ£€æŸ¥ä¾èµ–é¡¹çš„å¼•ç”¨ä¸Šï¼ˆç”±äºé—­åŒ…ï¼Œè¿™ç§æƒ…å†µå¯èƒ½ä¼šå¶ç„¶å‘ç”Ÿï¼Œä½†æ— è®ºå¦‚ä½•å®ƒéƒ½å€¼å¾—ä¸€æï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&#34;usememo-è™½ç„¶ä¸åŒ-ä½†å´æ˜¯ç›¸ä¼¼çš„&#34;&gt;useMemo è™½ç„¶ä¸åŒï¼Œä½†å´æ˜¯ç›¸ä¼¼çš„ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;useMemo&lt;/code&gt; ç±»ä¼¼äº &lt;code&gt;useCallback&lt;/code&gt;ï¼Œé™¤äº†å®ƒå…è®¸ä½ å°† &lt;strong&gt;memoization&lt;/strong&gt; åº”ç”¨äºä»»ä½•å€¼ç±»å‹ï¼ˆä¸ä»…ä»…æ˜¯å‡½æ•°ï¼‰ã€‚ å®ƒé€šè¿‡æ¥å—ä¸€ä¸ªè¿”å›å€¼çš„å‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œç„¶å&lt;strong&gt;åªåœ¨&lt;/strong&gt;éœ€è¦æ£€ç´¢å€¼æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼ˆé€šå¸¸è¿™åªæœ‰åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­ä¾èµ–é¡¹æ•°ç»„ä¸­çš„å…ƒç´ å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šå‘ç”Ÿä¸€æ¬¡ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä¸æƒ³åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶åˆå§‹åŒ–é‚£ä¸ª &lt;code&gt;initialCandies&lt;/code&gt; æ•°ç»„ï¼Œæˆ‘å¯ä»¥åšè¿™ä¸ªæ”¹å˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;gd&#34;&gt;- const initialCandies = [&amp;#39;snickers&amp;#39;, &amp;#39;skittles&amp;#39;, &amp;#39;twix&amp;#39;, &amp;#39;milky way&amp;#39;]
&lt;/span&gt;&lt;span class=&#34;gd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+ const initialCandies = React.useMemo(
&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+  () =&amp;gt; [&amp;#39;snickers&amp;#39;, &amp;#39;skittles&amp;#39;, &amp;#39;twix&amp;#39;, &amp;#39;milky way&amp;#39;],
&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+  [],
&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+ )
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘å¯ä»¥é¿å…é‚£ä¸ªé—®é¢˜ï¼Œä½†æ˜¯èŠ‚çœçš„æˆæœ¬æ˜¯å¦‚æ­¤ä¹‹å°ï¼Œä»¥è‡³äºæ¢æ¥ä½¿ä»£ç æ›´åŠ å¤æ‚çš„æˆæœ¬æ˜¯ä¸å€¼å¾—çš„ã€‚å®é™…ä¸Šï¼Œè¿™é‡Œä½¿ç”¨&lt;code&gt;useMemo&lt;/code&gt; ä¹Ÿå¯èƒ½ä¼šæ›´ç³Ÿï¼Œå› ä¸ºæˆ‘ä»¬å†æ¬¡è¿›è¡Œäº†å‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”ä»£ç ä¼šæ‰§è¡Œå±æ€§èµ‹å€¼ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¸ªç‰¹å®šçš„åœºæ™¯ä¸­ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯è¿›è¡Œè¿™ä¸ªæ›´æ”¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+ const initialCandies = [&amp;#39;snickers&amp;#39;, &amp;#39;skittles&amp;#39;, &amp;#39;twix&amp;#39;, &amp;#39;milky way&amp;#39;]
&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;  function CandyDispenser() {
&lt;span class=&#34;gd&#34;&gt;-   const initialCandies = [&amp;#39;snickers&amp;#39;, &amp;#39;skittles&amp;#39;, &amp;#39;twix&amp;#39;, &amp;#39;milky way&amp;#39;]
&lt;/span&gt;&lt;span class=&#34;gd&#34;&gt;&lt;/span&gt;    const [candies, setCandies] = React.useState(initialCandies)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†æœ‰æ—¶ä½ æ²¡æœ‰é‚£ä¹ˆå¥¢ä¾ˆï¼Œå› ä¸ºè¿™ä¸ªå€¼è¦ä¹ˆæ¥æºäº &lt;code&gt;props&lt;/code&gt; æˆ–è€…å‡½æ•°ä½“å†…åˆå§‹åŒ–çš„å…¶å®ƒå˜é‡ã€‚&lt;/p&gt;

&lt;p&gt;å…³é”®æ˜¯è¿™ä¸¤ç§æ–¹å¼æ— å…³ç´§è¦ï¼Œä¼˜åŒ–è¿™äº›ä»£ç çš„å¥½å¤„æ˜¯å¦‚æ­¤å¾®ä¸è¶³é“ï¼Œä»¥è‡³äºä½ å¯ä»¥æ›´å¥½åœ°èŠ±æ—¶é—´æ¥æ”¹å–„äº§å“è´¨é‡ã€‚&lt;/p&gt;

&lt;h2 id=&#34;é‡ç‚¹æ˜¯ä»€ä¹ˆ&#34;&gt;é‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;

&lt;p&gt;é‡ç‚¹æ˜¯ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯å…è´¹çš„ã€‚ å®ƒä»¬æ€»æ˜¯å¸¦æ¥æˆæœ¬ï¼Œä½†è¿™å¹¶ä¸æ€»æ˜¯å¸¦æ¥å¥½å¤„æ¥æŠµæ¶ˆæˆæœ¬ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œè´Ÿè´£ä»»åœ°è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ‰€ä»¥æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-usememo-å’Œ-usecallback&#34;&gt;æ‰€ä»¥æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useMemo å’Œ useCallbackï¼Ÿ&lt;/h2&gt;

&lt;p&gt;è¿™ä¸¤ä¸ª hooks å†…ç½®äº React éƒ½æœ‰ç‰¹åˆ«çš„åŸå› ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¼•ç”¨ç›¸ç­‰&lt;/li&gt;
&lt;li&gt;æ˜‚è´µçš„è®¡ç®—&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;å¼•ç”¨ç›¸ç­‰&#34;&gt;å¼•ç”¨ç›¸ç­‰&lt;/h2&gt;

&lt;p&gt;å¦‚æœä½ æ˜¯ JavaScript æˆ–è€…ç¼–ç¨‹æ–°æ‰‹ï¼Œä½ å¾ˆå¿«å°±ä¼šæ˜ç™½ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// false
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// false
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// false
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// true
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// NOTE: React actually uses Object.is, but it&amp;#39;s very similar to ===
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä¸æ‰“ç®—æ·±å…¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å½“ä½ åœ¨Reactå‡½æ•°ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒè·Ÿä¸Šæ¬¡å®šä¹‰çš„ç›¸åŒå¯¹è±¡ï¼Œå¼•ç”¨æ˜¯ä¸ä¸€æ ·çš„ï¼ˆå³ä½¿å®ƒå…·æœ‰æ‰€æœ‰ç›¸åŒå€¼å’Œç›¸åŒå±æ€§ï¼‰ï¼Œè¿™è¶³ä»¥è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨Reactä¸­ï¼Œæœ‰ä¸¤ç§æƒ…å†µä¸‹å¼•ç”¨ç›¸ç­‰å¾ˆé‡è¦ï¼Œè®©æˆ‘ä»¬ä¸€ä¸ªä¸ªåœ°æ¥çœ‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä¾èµ–åˆ—è¡¨&#34;&gt;ä¾èµ–åˆ—è¡¨&lt;/h3&gt;

&lt;p&gt;è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸ªä¾‹å­ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è­¦å‘Šï¼Œä½ å°†çœ‹åˆ°ä¸€äº›äººä¸ºæ•…æ„è®¾è®¡çš„ä»£ç ã€‚è¯·ä¸è¦å¹æ¯›æ±‚ç–µï¼Œåªå…³æ³¨æ¦‚å¿µï¼Œè°¢è°¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;buzz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// we want this to re-run if bar or baz change
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Blub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;bar value&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{3}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œæœ‰é—®é¢˜çš„åŸå› æ˜¯å› ä¸º &lt;code&gt;useEffect&lt;/code&gt; å°†å¯¹æ¯æ¬¡æ¸²æŸ“ä¸­å¯¹ &lt;code&gt;options&lt;/code&gt; è¿›è¡Œå¼•ç”¨ç›¸ç­‰æ€§æ£€æŸ¥ï¼Œå¹¶ä¸”ç”±äºJavaScriptçš„å·¥ä½œæ–¹å¼ï¼Œæ¯æ¬¡æ¸²æŸ“ &lt;code&gt;options&lt;/code&gt; éƒ½æ˜¯æ–°çš„ï¼Œæ‰€ä»¥å½“Reactæµ‹è¯• &lt;code&gt;options&lt;/code&gt; æ˜¯å¦åœ¨æ¸²æŸ“ä¹‹é—´å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå°†å§‹ç»ˆè®¡ç®—ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œæ„å‘³ç€æ¯æ¬¡æ¸²æŸ“åéƒ½ä¼šè°ƒç”¨ &lt;code&gt;useEffect&lt;/code&gt; å›è°ƒï¼Œè€Œä¸æ˜¯ä»…åœ¨ &lt;code&gt;bar&lt;/code&gt; å’Œ &lt;code&gt;baz&lt;/code&gt; æ›´æ”¹æ—¶è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥åšä¸¤ä»¶äº‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// option 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;buzz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// we want this to re-run if bar or baz change
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦‚æœè¿™æ˜¯çœŸçš„ï¼Œæˆ‘å°±ä¼šè¿™ä¹ˆåšã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µä¸‹ï¼šå¦‚æœ &lt;code&gt;bar&lt;/code&gt; æˆ–è€… &lt;code&gt;baz&lt;/code&gt; æ˜¯ï¼ˆéåŸå§‹å€¼ï¼‰å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå®é™…çš„è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Blub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{bar}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{baz}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ­£æ˜¯ &lt;code&gt;useCallback&lt;/code&gt; å’Œ &lt;code&gt;useMemo&lt;/code&gt; å­˜åœ¨çš„åŸå› ã€‚ä½ å¯ä»¥è¿™æ ·è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆç°åœ¨éƒ½æ”¾ä¸€èµ·äº†ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;buzz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;foobar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Blub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;baz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useMemo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{bar}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;baz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{baz}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼ŒåŒæ ·çš„äº‹æƒ…ä¹Ÿé€‚ç”¨äºä¼ é€’ç»™ &lt;code&gt;useEffect&lt;/code&gt;, &lt;code&gt;useLayoutEffect&lt;/code&gt;&lt;em&gt;,&lt;/em&gt; &lt;code&gt;useCallback&lt;/code&gt;, å’Œ  &lt;code&gt;useMemo&lt;/code&gt; çš„ä¾èµ–é¡¹æ•°ç»„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;react-memo&#34;&gt;React.memo&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;è­¦å‘Šï¼Œä½ å°†çœ‹åˆ°ä¸€äº›äººä¸ºæ•…æ„è®¾è®¡çš„ä»£ç ã€‚è¯·ä¸è¦å¹æ¯›æ±‚ç–µï¼Œåªå…³æ³¨æ¦‚å¿µï¼Œè°¢è°¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;çœ‹çœ‹è¿™ä¸ªï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CountButton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{onClick}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DualCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;increment1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;increment2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{count1}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{increment1}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{count2}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{increment2}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¯æ¬¡å•å‡»å…¶ä¸­ä»»ä½•ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œ&lt;code&gt;DualCounter&lt;/code&gt; çš„çŠ¶æ€éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¼šé‡æ–°æ¸²æŸ“ï¼Œç„¶åé‡æ–°æ¸²æŸ“ä¸¤ä¸ª&lt;code&gt;CountButton&lt;/code&gt;ã€‚ ä½†æ˜¯ï¼Œå®é™…ä¸Šåªéœ€è¦é‡æ–°æ¸²æŸ“è¢«ç‚¹å‡»çš„é‚£ä¸ªæŒ‰é’®å§ï¼Ÿå› æ­¤ï¼Œå¦‚æœä½ ç‚¹å‡»ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œåˆ™ç¬¬äºŒä¸ªä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œä½†æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“â€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¤§å¤šæ•°æ—¶å€™ï¼Œä½ ä¸éœ€è¦è€ƒè™‘å»ä¼˜åŒ–ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“&lt;/strong&gt;ã€‚Reactæ˜¯éå¸¸å¿«çš„ï¼Œæˆ‘èƒ½æƒ³åˆ°ä½ å¯ä»¥åˆ©ç”¨æ—¶é—´å»åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”èµ·åšè¿™äº›ç±»ä¼¼çš„ä¼˜åŒ–è¦å¥½å¾—å¤šã€‚äº‹å®ä¸Šï¼Œæˆ‘å±•ç¤ºç»™ä½ çœ‹çš„ä»£ç å¾ˆå°‘æœ‰ä¼˜åŒ–çš„éœ€æ±‚ï¼Œä»¥è‡³äºæˆ‘åœ¨ PayPal å·¥ä½œçš„3å¹´é‡Œä»æœªéœ€è¦è¿™æ ·åšï¼Œç”šè‡³åœ¨æˆ‘ä½¿ç”¨ React æ›´é•¿çš„æ—¶é—´é‡Œã€‚&lt;/p&gt;

&lt;p&gt;ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µä¸‹æ¸²æŸ“å¯èƒ½ä¼šèŠ±è´¹å¤§é‡æ—¶é—´ï¼ˆæ¯”å¦‚é‡äº¤äº’çš„å›¾è¡¨ã€åŠ¨ç”»ç­‰ï¼‰ã€‚å¤šäº React çš„å®ç”¨æ€§ï¼Œæœ‰ä¸€ä¸ªé€ƒç”Ÿèˆ±ï¼ˆescape hatchï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CountButton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{onClick}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç°åœ¨ React åªä¼šå½“ &lt;code&gt;props&lt;/code&gt; æ”¹å˜æ—¶ä¼šé‡æ–°æ¸²æŸ“ &lt;code&gt;CountButton&lt;/code&gt;ï¼  ä½†æˆ‘ä»¬è¿˜æ²¡æœ‰å®Œæˆï¼Œè¿˜è®°å¾—å¼•ç”¨ç›¸ç­‰å—ï¼Ÿåœ¨ &lt;code&gt;DualCounter&lt;/code&gt; ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç»„ä»¶å‡½æ•°é‡Œå®šä¹‰äº† &lt;code&gt;increment1&lt;/code&gt; å’Œ &lt;code&gt;increment2&lt;/code&gt; å‡½æ•°ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡ &lt;code&gt;DualCounter&lt;/code&gt; é‡æ–°æ¸²æŸ“ï¼Œé‚£äº›å‡½æ•°ä¼šæ–°åˆ›å»ºï¼Œå› æ­¤ React æ— è®ºå¦‚ä½•ä¼šé‡æ–°æ¸²æŸ“ä¸¤ä¸ª &lt;code&gt;CountButton&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥è¿™æ˜¯ &lt;code&gt;useCallback&lt;/code&gt; å’Œ &lt;code&gt;useMemo&lt;/code&gt; èƒ½æ´¾ä¸Šç”¨åœºçš„å¦å¤–ä¸€ä¸ªåœºæ™¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;memo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CountButton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{onClick}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DualCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;increment1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;increment2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useCallback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setCount2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{count1}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{increment1}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CountButton&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{count2}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{increment2}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¯ä»¥é¿å… &lt;code&gt;CountButton&lt;/code&gt; çš„æ‰€è°“â€œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“â€ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘æƒ³é‡ç”³ä¸‹ï¼Œ&lt;strong&gt;åœ¨æ²¡æœ‰æµ‹é‡å‰&lt;/strong&gt;ï¼Œå¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨ &lt;code&gt;React.momo&lt;/code&gt; ï¼ˆæˆ–è€…å®ƒçš„æœ‹å‹ &lt;code&gt;PureComponent&lt;/code&gt; å’Œ &lt;code&gt;shouldComponentUpdate&lt;/code&gt;ï¼‰ï¼Œå› ä¸ºä¼˜åŒ–æ€»ä¼šå¸¦æ¥æˆæœ¬ï¼Œå¹¶ä¸”ä½ éœ€è¦ç¡®ä¿çŸ¥é“ä¼šæœ‰å¤šå°‘æˆæœ¬å’Œæ”¶ç›Šï¼Œè¿™æ ·ä½ æ‰èƒ½å†³å®šåœ¨ä½ çš„æ¡ˆä¾‹ä¸­å®ƒæ˜¯å¦èƒ½çœŸçš„æœ‰å¸®åŠ©ï¼ˆè€Œä¸æ˜¯æœ‰å®³çš„ï¼‰ã€‚æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„é‚£æ ·ï¼Œ&lt;strong&gt;ä¸€ç›´ä¿æŒæ­£ç¡®æ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œæ‰€ä»¥ä½ å¯èƒ½æ— æ³•è·å¾—ä»»ä½•å¥½å¤„&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ˜‚è´µçš„è®¡ç®—&#34;&gt;æ˜‚è´µçš„è®¡ç®—&lt;/h2&gt;

&lt;p&gt;è¿™æ˜¯ &lt;code&gt;useMemo&lt;/code&gt; å†…ç½®äº React çš„å¦ä¸€ä¸ªåŸå› ï¼ˆæ³¨æ„è¿™ä¸ªä¸é€‚ç”¨äº &lt;code&gt;useCallback&lt;/code&gt;ï¼‰ã€‚&lt;code&gt;useMemo&lt;/code&gt; çš„å¥½å¤„æ˜¯ä½ å¯ä»¥é‡‡ç”¨å¦‚ä¸‹å€¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åæƒ°æ€§è·å–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useMemo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™å¯¹äºä¸Šé¢çš„æƒ…å†µå¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯æƒ³è±¡ä¸€ä¸‹ä½ æœ‰ä¸€ä¸ªè®¡ç®—æˆæœ¬å¾ˆé«˜çš„åŒæ­¥è®¡ç®—å€¼çš„å‡½æ•°ï¼ˆæˆ‘çš„æ„æ€æ˜¯æœ‰å¤šå°‘åº”ç”¨çœŸå®åœ°éœ€è¦ &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Tools/Performance/Scenarios/Intensive_JavaScript&#34;&gt;åƒè¿™æ ·è®¡ç®—ç´ æ•°&lt;/a&gt;ï¼Œä½†è¿™å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RenderPrimes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;iterations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;multiplier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;primes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;calculatePrimes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;iterations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;multiplier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Primes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;primes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨æ­£ç¡®çš„ &lt;code&gt;iterations&lt;/code&gt; æˆ– &lt;code&gt;multiplier&lt;/code&gt; å¯èƒ½ä¼šéå¸¸ç¼“æ…¢ï¼Œè€Œä¸”ä½ æ²¡æœ‰å¤ªå¤šå¯ä»¥ç‰¹åˆ«åšçš„äº‹æƒ…ã€‚ä½ ä¸èƒ½è‡ªåŠ¨åœ°ç”¨æˆ·çš„ç¡¬ä»¶æ›´å¿«ï¼Œä½†æ˜¯ä½ å¯ä»¥è¿™æ ·åšï¼Œè¿™æ ·ä½ å°±ä¸å¿…è¿ç»­ä¸¤æ¬¡è®¡ç®—ç›¸åŒçš„å€¼ï¼Œè¿™å°±æ˜¯ &lt;code&gt;useMemo&lt;/code&gt; ä¸ºä½ æ‰€åšçš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-react&#34; data-lang=&#34;react&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;RenderPrimes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;iterations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;multiplier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;primes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useMemo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;calculatePrimes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;iterations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;multiplier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;iterations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;multiplier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Primes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;primes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯ä»¥è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå³ä½¿ä½ åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶å®šä¹‰äº†è®¡ç®—ç´ æ•°çš„å‡½æ•°ï¼ˆéå¸¸å¿«ï¼‰ï¼ŒReactåªåœ¨éœ€è¦å€¼æ—¶æ‰è°ƒç”¨è¯¥å‡½æ•°ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒReactè¿˜ä¼šåœ¨ç»™å®šè¾“å…¥çš„æƒ…å†µä¸‹å­˜å‚¨å…ˆå‰çš„å€¼ï¼Œå¹¶åœ¨ç»™å®šè·Ÿä¹‹å‰ç›¸åŒè¾“å…¥çš„æƒ…å†µä¸‹è¿”å›å…ˆå‰çš„å€¼ã€‚ è¿™æ˜¯ &lt;strong&gt;memoization&lt;/strong&gt; åœ¨èµ·ä½œç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘æƒ³è¯´ï¼Œæ¯ä¸ªæŠ½è±¡(å’Œæ€§èƒ½ä¼˜åŒ–)éƒ½æ˜¯æœ‰ä»£ä»·çš„ã€‚åº”ç”¨ &lt;a href=&#34;https://kentcdodds.com/blog/aha-programming&#34;&gt;AHA ç¼–ç¨‹åŸåˆ™&lt;/a&gt;ï¼Œç›´åˆ°ç¡®å®éœ€è¦æŠ½è±¡æˆ–ä¼˜åŒ–æ—¶æ‰å»åšï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰¿æ‹…æˆæœ¬è€Œä¸ä¼šè·å¾—æ”¶ç›Šçš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œ&lt;code&gt;useCallback&lt;/code&gt; å’Œ &lt;code&gt;useMemo&lt;/code&gt;çš„æˆæœ¬æ˜¯ï¼šå¯¹äºä½ çš„åŒäº‹æ¥è¯´ï¼Œä½ ä½¿ä»£ç æ›´å¤æ‚äº†ï¼›ä½ å¯èƒ½åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”ä½ å¯èƒ½é€šè¿‡è°ƒç”¨å†…ç½®çš„ hookã€å¹¶é˜²æ­¢ä¾èµ–é¡¹å’Œ memoized å€¼è¢«åƒåœ¾æ”¶é›†ï¼Œè€Œä½¿æ€§èƒ½å˜å·®ã€‚å¦‚æœä½ è·å¾—äº†å¿…è¦çš„æ€§èƒ½æ”¶ç›Šï¼Œé‚£ä¹ˆè¿™äº›æˆæœ¬éƒ½æ˜¯å€¼å¾—æ‰¿æ‹…çš„ï¼Œä½†&lt;strong&gt;æœ€å¥½å…ˆæµ‹é‡ä¸€ä¸‹&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç›¸å…³é˜…è¯»ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;React FAQ: &lt;a href=&#34;https://reactjs.org/docs/hooks-faq.html#are-hooks-slow-because-of-creating-functions-in-render&#34;&gt;&amp;ldquo;Are Hooks slow because of creating functions in render?&amp;rdquo;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://twitter.com/ryanflorence&#34;&gt;Ryan Florence&lt;/a&gt;: &lt;a href=&#34;https://reacttraining.com/blog/react-inline-functions-and-performance&#34;&gt;React, Inline Functions, and Performance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>Node Cluster Workers IPC</title>
      <link>https://jancat.github.io/post/2019/node-cluster-workers-ipc/</link>
      <pubDate>Thu, 27 Jun 2019 00:50:07 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2019/node-cluster-workers-ipc/</guid>
      
        <description>&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190627003616.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Node ä»¥å•è¿›ç¨‹ã€JS å•çº¿ç¨‹æ¶æ„è¿è¡Œæ—¶ï¼Œç”±äºå…¶å¼‚æ­¥éé˜»å¡ã€äº‹ä»¶é©±åŠ¨çš„ç‰¹æ€§ï¼Œèƒ½å¤ŸåŒæ—¶æ¥å—å¤§é‡å¹¶å‘è¯·æ±‚ï¼ŒI/O çº¿ç¨‹â€œæ¥å•â€åæ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ç­‰ç€è¢«äº‹ä»¶å¾ªç¯å¤„ç†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å•è¿›ç¨‹å•çº¿ç¨‹çš„å±€é™å’Œ-cluster-çš„ä¼˜åŠ¿&#34;&gt;å•è¿›ç¨‹å•çº¿ç¨‹çš„å±€é™å’Œ Cluster çš„ä¼˜åŠ¿&lt;/h2&gt;

&lt;p&gt;ç„¶è€Œï¼Œå•è¿›ç¨‹ä¸‹æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„è®¡ç®—èƒ½åŠ›ï¼Œé€ æˆèµ„æºæµªè´¹ï¼Œè€Œä¸”å¹¶å‘æ•°é€æ¸å¢åŠ åï¼Œæ¯ä¸ªè¯·æ±‚çš„å¹³å‡å¤„ç†æ—¶é—´ä¼šè¶Šæ¥è¶Šé•¿ã€‚è¿™ä¸ªé˜¶æ®µæ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“æå‡çš„ï¼Œå¯ä»¥å¼•å…¥ Node Clusterï¼Œç”¨é›†ç¾¤å¤šè¿›ç¨‹çš„æ–¹å¼å……åˆ†åˆ©ç”¨å¤šæ ¸ CPUã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://medium.com/tech-tajawal/clustering-in-nodejs-utilizing-multiple-processor-cores-75d78aeb0f4f&#34;&gt;Clustering in NodeJsâ€Šâ€”â€ŠPerformance Optimizationâ€Šâ€”â€ŠPart I&lt;/a&gt; ä¸€æ–‡ä¸­å¯¹å•çº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰å’Œ Cluster é›†ç¾¤ï¼Œå¤šä¸ªå¹¶å‘è¯·æ±‚é‡ä¸‹çš„å¹³å‡å¤„ç†æ—¶é—´åšäº†æµ‹è¯•æ¯”è¾ƒï¼Œæµ‹è¯•æ•°æ®å¦‚ä¸‹å›¾ã€‚ç»“æœè¡¨æ˜ï¼Œåœ¨ Cluster é›†ç¾¤ä¸‹ï¼Œæ€§èƒ½ï¼ˆè¯·æ±‚å¹³å‡å¤„ç†æ—¶é—´ï¼‰æå‡äº† 66%ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190623195156.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;cluster-å®è·µ&#34;&gt;Cluster å®è·µ&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;cluster æ¨¡å‹ä¸‹ï¼Œmaster ç§°ä¸ºä¸»è¿›ç¨‹ï¼Œfork å‡ºæ¥çš„ worker å³ä»è¿›ç¨‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç®€å•çš„ master - worker æ¨¡å‹å¤„ç† http è¯·æ±‚çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;master.js&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cluster&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;os&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cpus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isMaster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Master &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; is running`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Fork workers.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;exit&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; died`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// accidental exit, add new worker
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exitedAfterDisconnect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./worker&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¼•å…¥äº† &lt;code&gt;cluster&lt;/code&gt; æ¨¡å—åï¼Œæ ¹æ® &lt;code&gt;cluster.isMaster&lt;/code&gt; åˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯å¦ä¸»è¿›ç¨‹ï¼Œç„¶å &lt;strong&gt;fork&lt;/strong&gt; å‡º workerï¼Œä¸€èˆ¬æ ¹æ® CPU æ•°é‡æ¥å†³å®š worker æ•°é‡ã€‚å¦‚æœæ˜¯ workerï¼Œåˆ™å¼•å…¥ worker æ–‡ä»¶æ‰§è¡Œã€‚è¿™é‡ŒæŠŠ master å’Œ worker æ¨¡å—åˆ†ç¦»å¼€æ¥ï¼Œæ–¹ä¾¿å•ç‹¬ç»´æŠ¤ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code&gt;if else&lt;/code&gt; æ¡ä»¶åˆ†æ”¯æ˜¯å› ä¸ºæ‰§è¡Œ &lt;code&gt;fork()&lt;/code&gt; ä¹‹åï¼Œworker ä¼šä»¥æ–°è¿›ç¨‹çš„æ–¹å¼é‡æ–°æ‰§è¡Œå½“å‰æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®å½“å‰è¿›ç¨‹ç±»å‹æ‰§è¡Œå¯¹åº”çš„é€»è¾‘ã€‚&lt;/p&gt;

&lt;p&gt;master ä¸­è¿˜ç›‘å¬äº† worker &lt;code&gt;exit&lt;/code&gt; äº‹ä»¶ï¼Œå½“ worker å¼‚å¸¸é€€å‡ºï¼ˆé master ä¸»åŠ¨å…³é—­ï¼Œé€šè¿‡ &lt;code&gt;exitedAfterDisconnect&lt;/code&gt; åˆ¤æ–­ï¼‰æ—¶ï¼Œå†é‡æ–° fork ä¸€ä¸ª workerã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;worker.js&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Workers can share any TCP connection
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// In this case it is an HTTP server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;hello world\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; started`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;worker ä¸­è´Ÿè´£å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ï¼Œè™½ç„¶ listen åŒä¸€ä¸ªç«¯å£ï¼Œä½†å…¶å®æ˜¯åªæœ‰ master ç›‘å¬äº†è¯¥ç«¯å£ï¼Œæœ‰æ–°çš„è¿æ¥è¿‡æ¥ååˆ†é…ç»™ workers å¤„ç†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;cluster-workers-ipc&#34;&gt;Cluster workers IPC&lt;/h2&gt;

&lt;p&gt;master å’Œ worker ä¹‹é—´å¯ä»¥åˆ©ç”¨ IPC é€šé“è¿›è¡Œé€šä¿¡ï¼Œé€šè¿‡ &lt;code&gt;process.send()&lt;/code&gt; å’Œ &lt;code&gt;process.on(&#39;message&#39;)&lt;/code&gt; åœ¨ master å’Œ worker é—´ä¼ é€’æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// worker
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;message&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Message from parent:&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Message from worker&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;http://zhenhua-lee.github.io/img/node-server/process.png&#34; alt=&#34;Ã¥Â¤ÂšÃ¦ Â¸Ã¥ÂˆÂ©Ã§Â”Â¨&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿™ä¸ª IPC é€šé“åªå­˜åœ¨äºçˆ¶å­è¿›ç¨‹ä¹‹é—´ï¼Œæ˜¯ç”± libuv åˆ›å»ºçš„ï¼Œworkers ä¹‹é—´å¦‚æœè¦ IPC è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå› ä¸º workers ä¸é€‚åˆè‡ªå·±æ¥å®ç° IPC äº’ç›¸é€šä¿¡ï¼Œè°æ¥è¿æ¥è°å‘¢ï¼Ÿæ‰€ä»¥æœ€å¥½æ˜¯é€šè¿‡ä¸€ä¸ªä»£ç†æ¥å®ç°ã€‚workers è¿æ¥ä»£ç†ï¼Œä¸ä»£ç†äº’ç›¸å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼Œä»£ç†åªè´Ÿè´£è½¬å‘ï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ° workers ä¹‹é—´ IPC çš„ç›®çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢ä»‹ç»ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸ªä»£ç†ï¼š&lt;/p&gt;

&lt;h3 id=&#34;unix-domain-socket-ipc&#34;&gt;Unix Domain Socket IPC&lt;/h3&gt;

&lt;p&gt;é€šè¿‡ Node &lt;code&gt;net.createServer()&lt;/code&gt; å¯ä»¥åˆ›å»º Unix domain socket serverï¼Œç›‘å¬æœ¬åœ°æ–‡ä»¶å¥æŸ„æ¥å®ç°æœ¬åœ°è·¨è¿›ç¨‹é€šä¿¡ã€‚Unix domain socket server å¼€å§‹ç›‘å¬åï¼Œwrokers é€šè¿‡ &lt;code&gt;net.connect()&lt;/code&gt; åˆ›å»º client socket è¿æ¥åˆ° server socketï¼ŒUnix domain socket æ˜¯å…¨åŒå·¥çš„ï¼Œå› æ­¤åŒæ–¹éƒ½å¯ä»¥ä½¿ç”¨&lt;code&gt;send()&lt;/code&gt;å’Œ&lt;code&gt;recv()&lt;/code&gt;æ¥è¿›è¡Œæ•°æ®çš„æ”¶å‘ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æƒ³æ·±å…¥äº†è§£ net å’Œ Unix domain socket æ¨èé˜…è¯»ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://cnodejs.org/topic/5ae1f5da39a81e4548f45741&#34;&gt;ä¸€ä¸ªä½¿ç”¨ unix domain socket è¿›è¡Œ IPC çš„å°ä¾‹å­&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://semlinker.com/node-net/&#34;&gt;æ·±å…¥å­¦ä¹  Node.js Net&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æŸä¸ª worker æƒ³è¦è·Ÿå…¶å®ƒ worker åŒæ­¥æ•°æ®æ—¶ï¼Œé¦–å…ˆè°ƒç”¨ &lt;code&gt;send()&lt;/code&gt; å‘é€æ•°æ®ç»™ server socketï¼Œserver socket é€šè¿‡ &lt;code&gt;recv()&lt;/code&gt; æ¥æ”¶åˆ°æ¶ˆæ¯åè½¬å‘åˆ°å¯¹åº”çš„ workersï¼Œå®ç°äº† workers æ•°æ®åŒæ­¥ã€‚&lt;/p&gt;

&lt;p&gt;è·Ÿ master - worker æä¾›çš„ IPC API ä¸åŒï¼Œè¿™ç§æ–¹å¼éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç° Node IPC çš„ç»†èŠ‚ï¼Œç®¡ç†æ•°æ®é€šä¿¡ï¼Œæˆæœ¬è¾ƒé«˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://midwayjs.org/pandora/zh-cn/guide/process/ipc_hub.html#%E7%9B%B4%E6%8E%A5%E5%8F%91%E5%B8%83%E5%AF%B9%E8%B1%A1%E5%92%8C%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E4%BB%A3%E7%90%86&#34;&gt;Pandora.js è¿›ç¨‹é—´é€šä¿¡&lt;/a&gt; å°±æ˜¯ä½¿ç”¨äº† Unix Domain Socket IPC æ¥å®ç°è·¨è¿›ç¨‹è®¿é—®ã€è°ƒç”¨ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Pandora.js åˆ›å»º Unix Domain Socket çš„æºç ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/midwayjs/pandora/blob/f9089637c15f6a3070cc601abb7744bc42f229aa/packages/messenger/src/base.ts#L37&#34;&gt;Pandora messenger base&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/midwayjs/pandora/blob/f9089637c15f6a3070cc601abb7744bc42f229aa/packages/messenger/src/server.ts#L28&#34;&gt;Pandora messenger server&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿˜æœ‰ &lt;a href=&#34;https://github.com/RIAEvangelist/node-ipc&#34;&gt;node-ipc&lt;/a&gt; è¿™ä¸ª node æ¨¡å—å°è£…äº†é€šç”¨çš„ IPC APIï¼Œè™½ç„¶ä¸å†ç»´æŠ¤äº†ï¼Œä½†ä¸‹è½½é‡æŒºé«˜çš„ï¼Œä¸å¦¨ä¸€è¯•ã€‚&lt;/p&gt;

&lt;h3 id=&#34;master-ä»£ç†&#34;&gt;Master ä»£ç†&lt;/h3&gt;

&lt;p&gt;Unix domain socket å®ç° IPC ä¸“èŒè´Ÿè´£ workers IPC ä»£ç†ï¼Œè™½ç„¶è‡ªç”±åº¦æ›´é«˜ï¼Œèƒ½çµæ´»æ§åˆ¶ IPC ç»†èŠ‚ï¼Œä½†ç›¸åº”çš„ä¼šå¢åŠ å¼€å‘ç»´æŠ¤æˆæœ¬ã€‚å¦‚æœåªéœ€è¦ç®€å•çš„ workers IPC ï¼Œå®Œå…¨å¯ä»¥è®© master ä»£ç†ï¼Œé€šè¿‡ master - worker IPC æä¾›çš„ API å¿«é€Ÿå®ç°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190627010404.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Egg.js&lt;/strong&gt; &lt;a href=&#34;https://eggjs.org/zh-cn/core/cluster-and-ipc.html&#34;&gt;è¿›ç¨‹é—´é€šä¿¡&lt;/a&gt;ä¹Ÿä»‹ç»äº†è¿™ç§æ–¹å¼ï¼Œå¦‚æœæƒ³è¦åœ¨æ‰€æœ‰ workers ä¹‹é—´åŒæ­¥ï¼Œå¯ä»¥é€šè¿‡ &lt;strong&gt;Agent&lt;/strong&gt; æ¥å¹¿æ’­ï¼Œå¦‚æœæƒ³è¦åœ¨æŒ‡å®šçš„ workers é—´é€šä¿¡ï¼Œå°±é€šè¿‡ master æ¥è½¬å‘ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;å¹¿æ’­æ¶ˆæ¯ï¼š agent =&amp;gt; all workers
                  +--------+          +-------+
                  | Master |&amp;lt;---------| Agent |
                  +--------+          +-------+
                 /    |     \
                /     |      \
               /      |       \
              /       |        \
             v        v         v
  +----------+   +----------+   +----------+
  | Worker 1 |   | Worker 2 |   | Worker 3 |
  +----------+   +----------+   +----------+

æŒ‡å®šæ¥æ”¶æ–¹ï¼š one worker =&amp;gt; another worker
                  +--------+          +-------+
                  | Master |----------| Agent |
                  +--------+          +-------+
                 ^    |
     send to    /     |
    worker 2   /      |
              /       |
             /        v
  +----------+   +----------+   +----------+
  | Worker 1 |   | Worker 2 |   | Worker 3 |
  +----------+   +----------+   +----------+&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;ip-é™æµä¾‹å­&#34;&gt;IP é™æµä¾‹å­&lt;/h4&gt;

&lt;p&gt;ç°åœ¨é€šè¿‡ Master ä»£ç†çš„æ–¹å¼æ¥å®ç°ä¸€ä¸ª Cluster æ¨¡å¼ä¸‹ IP é™æµçš„ä¾‹å­ï¼Œç›®çš„æ˜¯åœ¨ workers é—´å¯¹åŒä¸€ä¸ª IP çš„è¯·æ±‚æ¬¡æ•°åšé™åˆ¶ï¼Œè¶…è¿‡è¯·æ±‚é˜ˆå€¼åå°±å“åº”é”™è¯¯ã€‚è¿™å°±è¦æ±‚ workers é—´åŒæ­¥æ¯ä¸ª IP çš„è¯·æ±‚æ¬¡æ•°ï¼Œè¿™é‡Œé€šè¿‡ master æ¥ä»£ç† workers IPCã€‚&lt;/p&gt;

&lt;h5 id=&#34;worker-js&#34;&gt;worker.js&lt;/h5&gt;

&lt;p&gt;worker ä¼šåœ¨å¤„ç†è¯·æ±‚æ—¶è®°å½•å½“å‰çš„ IPï¼Œå¹¶å‘ master å‘é€æ¶ˆæ¯åŒæ­¥ç»™å…¶å®ƒ workersï¼Œå¦‚æœå½“å‰ IP çš„ç´¯è®¡è¯·æ±‚æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œåˆ™å“åº” 400ã€‚&lt;/p&gt;

&lt;p&gt;worker ä¼šç›‘å¬ master çš„ &lt;code&gt;message&lt;/code&gt; æ¶ˆæ¯ï¼Œå½“æ¥æ”¶åˆ°å…¶å®ƒ workers å‘æ¥çš„ IP åŒæ­¥æ¶ˆæ¯æ—¶ï¼Œå°±å¢åŠ å½“å‰è¿›ç¨‹è®°å½•çš„ IP è¯·æ±‚æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// record the number of IP requests
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Workers can share any TCP connection
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// In this case it is an HTTP server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;x-forwarded-for&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;remoteAddress&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syncRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;warn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`[&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;] IP: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; exceeded the maximum request quantity!`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Too many requests!&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;hello world\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// increase ip request number when notified by other workers
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;message&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SYNC_REQUEST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// increase ip request number and notify other workers
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syncRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SYNC_REQUEST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; started`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;master-js&#34;&gt;master.js&lt;/h5&gt;

&lt;p&gt;master åœ¨ fork worker ååŒæ—¶ç›‘å¬äº†è¯¥ worker çš„ &lt;code&gt;message&lt;/code&gt; æ¶ˆæ¯ï¼Œå½“ä¸€ä¸ª worker å¸Œæœ›è·Ÿå…¶å®ƒ workers åŒæ­¥ IP è¯·æ±‚æ—¶ï¼Œmaster ä¼šè´Ÿè´£å°†æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒ workersï¼Œè¾¾åˆ°äº† workers IPC çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cluster&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;os&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cpus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isMaster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Master &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; is running`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Fork workers.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;message&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// proxy workers IPC
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SYNC_REQUEST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;sendToOhterWorkers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;exit&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; died`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// accidental exit, add new worker
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exitedAfterDisconnect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sendToOhterWorkers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;workerSender&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;workers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;workerSender&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;workers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./worker&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h5&gt;

&lt;p&gt;å¯åŠ¨ &lt;strong&gt;master.js&lt;/strong&gt;ï¼Œworkers å¼€å§‹ç›‘å¬æœ¬åœ° 8000 ç«¯å£ HTTP è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;node master.js
Master &lt;span class=&#34;m&#34;&gt;63657&lt;/span&gt; is running
Worker &lt;span class=&#34;m&#34;&gt;63658&lt;/span&gt; started
Worker &lt;span class=&#34;m&#34;&gt;63659&lt;/span&gt; started
Worker &lt;span class=&#34;m&#34;&gt;63660&lt;/span&gt; started
...&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;curl&lt;/code&gt; å‘½ä»¤è®¾ç½® &lt;code&gt;X-Forwarded-For&lt;/code&gt; headerï¼Œæ¨¡æ‹Ÿä¸åŒ IP è¯·æ±‚ã€‚é¦–å…ˆæ¨¡æ‹Ÿ &lt;code&gt;0.0.0.0&lt;/code&gt; IP è¿ç»­å‘é€ 3 æ¬¡è¯·æ±‚ï¼Œè¯·æ±‚é˜ˆå€¼è®¾ç½®ä¸º 3ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;curl --header &lt;span class=&#34;s2&#34;&gt;&amp;#34;X-Forwarded-For: 0.0.0.0&amp;#34;&lt;/span&gt; -i localhost:8000
curl --header &lt;span class=&#34;s2&#34;&gt;&amp;#34;X-Forwarded-For: 0.0.0.0&amp;#34;&lt;/span&gt; -i localhost:8000
curl --header &lt;span class=&#34;s2&#34;&gt;&amp;#34;X-Forwarded-For: 0.0.0.0&amp;#34;&lt;/span&gt; -i localhost:8000

HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
hello world&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;IP &lt;code&gt;0.0.0.0&lt;/code&gt; å‘é€ç¬¬ 4 æ¬¡è¯·æ±‚æ—¶ï¼Œå› ä¸ºè¶…è¿‡äº†é˜ˆå€¼ï¼Œä¼šè¢«æŸä¸ª worker å“åº” 400ï¼Œåé¢å†ç”¨æ­¤ IP å‘é€è¯·æ±‚åˆ° workersï¼Œéƒ½ä¼šå“åº” 400ï¼Œå› ä¸ºè¯·æ±‚æ•°åœ¨ workers é—´æ˜¯åŒæ­¥çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;curl --header &lt;span class=&#34;s2&#34;&gt;&amp;#34;X-Forwarded-For: 0.0.0.0&amp;#34;&lt;/span&gt; -i localhost:8000

HTTP/1.1 &lt;span class=&#34;m&#34;&gt;400&lt;/span&gt; Bad Request
Too many requests!&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;node ä¸åŒ worker è¿›ç¨‹æ‰“å° warn æ—¥å¿—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;65097&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; IP: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0.0 exceeded the maximum request quantity!
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;65100&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; IP: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0.0 exceeded the maximum request quantity!&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å†æ¨¡æ‹Ÿå…¶å®ƒ IP è¯·æ±‚ï¼Œæ­£å¸¸å“åº”ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;curl --header &lt;span class=&#34;s2&#34;&gt;&amp;#34;X-Forwarded-For: 0.0.0.1&amp;#34;&lt;/span&gt; -i localhost:8000

HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
hello world&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æµ‹è¯•ç»“æœè¯´æ˜ï¼Œè¿™ä¸ªä¾‹å­èƒ½ç®€å•å®ç° cluster workers IPC åŒæ­¥ IP è¯·æ±‚æ•°é‡ï¼Œè¿›è¡Œ IP é™æµã€‚&lt;/p&gt;

&lt;h5 id=&#34;å¹¶å‘æµ‹è¯•&#34;&gt;å¹¶å‘æµ‹è¯•&lt;/h5&gt;

&lt;p&gt;ä¸Šé¢æ˜¯ç”¨é¡ºåºçš„ HTTP è¯·æ±‚æµ‹è¯•ï¼Œæœ¬ä¾‹ä¸­çš„ Node æœåŠ¡èƒ½é¡ºåˆ©å¤„ç†ä¸²è¡Œçš„ IP è¯·æ±‚é™æµï¼Œä¸‹é¢å°è¯•åœ¨&lt;strong&gt;å¹¶å‘&lt;/strong&gt;è¯·æ±‚æ¡ä»¶ä¸‹ï¼Œæ˜¯å¦è¿˜èƒ½æŒ‰ç…§é¢„æœŸå¤„ç†ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ Apache å‹åŠ›æµ‹è¯•å·¥å…· &lt;code&gt;ab&lt;/code&gt; æ¥æµ‹è¯•å¹¶å‘çš„ HTTP è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ab -H &lt;span class=&#34;s1&#34;&gt;&amp;#39;x-forwarded-for: 0.0.0.2&amp;#39;&lt;/span&gt; -n &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; -c &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; localhost:8000/&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å‘é€ 10 æ¬¡è¯·æ±‚ï¼Œå¹¶å‘æ•°ä¸º 5ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”è¯¥åªæœ‰å‰ 3 æ¬¡è¯·æ±‚æˆåŠŸï¼Œåé¢ 7 æ¬¡éƒ½ä¼šå¤±è´¥ã€‚å®é™…ç»“æœå¾€å¾€å¾ˆéª¨æ„Ÿï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;Concurrency Level:      5
Complete requests:      10
Failed requests:        4
Non-2xx responses:      4&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;ab&lt;/code&gt; çš„æµ‹è¯•ç»“æœä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¤±è´¥çš„è¯·æ±‚æ•°æ˜¯ 4ï¼Œè¯´æ˜æœ‰ 6 æ¬¡è¯·æ±‚æˆåŠŸäº†ï¼Œè·Ÿé¢„æœŸä¸ç¬¦ã€‚å› ä¸ºåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œå¤šä¸ª workers åŒæ—¶å¤„ç† HTTP è¯·æ±‚ï¼Œå¯èƒ½åœ¨ workers åŒæ­¥å¹¶æ¥æ”¶åˆ° IP è¯·æ±‚æ¶ˆæ¯å‰ï¼Œå½“å‰çš„ HTTP è¯·æ±‚å·²ç»å¤„ç†å®Œå“åº”äº†ã€‚è¿™æ˜¯ IPC å¼‚æ­¥å¯¼è‡´çš„é—®é¢˜ï¼Œè€Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡é˜ˆå€¼çš„é€»è¾‘åˆæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¼šæœ‰æ¼ç½‘ä¹‹é±¼é€ƒè¿‡äº†é™æµã€‚&lt;/p&gt;

&lt;h5 id=&#34;å­˜åœ¨çš„é—®é¢˜&#34;&gt;å­˜åœ¨çš„é—®é¢˜&lt;/h5&gt;

&lt;p&gt;ä¸¥æ ¼æ¥è¯´ï¼Œworkers é—´éœ€è¦å®æ—¶åŒæ­¥çš„çŠ¶æ€ä¸åº”è¯¥ç”± worker è‡ªå·±ç®¡ç†ï¼Œè€Œæ˜¯äº¤ç”±ç¬¬ä¸‰æ–¹æ¥ç®¡ç†å…±äº«çŠ¶æ€ï¼Œworker åªè´Ÿè´£å‘é€æ›´æ–°æŒ‡ä»¤å’Œè·å–çŠ¶æ€ï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹å¯èƒ½æ˜¯ master æˆ–è€… Redis ç­‰ï¼ŒåŒæ—¶åˆ¤æ–­è¶…è¿‡é˜ˆå€¼çš„é€»è¾‘ä¹Ÿåº”è¯¥æ˜¯å¼‚æ­¥è·å–å®Œå½“å‰çŠ¶æ€å†æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ä¾‹ä¸­ä¹Ÿè¿˜æœ‰ä¸€äº›é—®é¢˜å­˜åœ¨ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¸€ä¸ª worker è¢« kill æ‰ï¼Œmaster å†é‡æ–° fork å‡ºæ¥çš„æ–° workerï¼ŒIP è®°å½•è¯·æ±‚æ•°æ˜¯ä» 0 å¼€å§‹è®¡æ•°çš„ï¼ŒæŸä¸ªè¢«é™æµçš„ IP å¦‚æœè¢«è½¬å‘åˆ°è¿™ä¸ª worker ä¸Šå¤„ç†ï¼Œä¼šä¾¥å¹¸é€ƒè¿‡ä¸€åŠ«ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ‰€æœ‰çš„ workers IPC éƒ½ç”± master ä»£ç†ï¼Œä¼šåŠ é‡ master çš„å¤„ç†è´Ÿæ‹…ï¼Œæµé‡å¢é•¿åå¯èƒ½ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æŸä¸ª IP è¢«é™æµåï¼Œåé¢çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåœ¨ workers é—´ç»§ç»­åŒæ­¥è®¡æ•°ï¼Œæœ‰ç‚¹å¤šä½™ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;â€¦&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;clusterhub-https-github-com-fent-clusterhub-æ¨¡å—&#34;&gt;&lt;a href=&#34;https://github.com/fent/clusterhub&#34;&gt;clusterhub&lt;/a&gt; æ¨¡å—&lt;/h4&gt;

&lt;p&gt;ä¸Šé¢çš„ master ä»£ç† workers IPC ä¹Ÿæœ‰åº“å¯ä»¥æ”¯æŒï¼Œ&lt;a href=&#34;https://github.com/fent/clusterhub&#34;&gt;clusterhub&lt;/a&gt; è¿™ä¸ª Node æ¨¡å—æä¾›äº† &lt;strong&gt;EventEmitter&lt;/strong&gt; çš„æ–¹å¼æ¥è®© master ä»£ç† workers IPCï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥å¼•å…¥è¿™ä¸ªæ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨å°±æ¥è¯•ä¸€ä¸‹ç”¨ &lt;strong&gt;clusterhub&lt;/strong&gt; æ¨¡å—æ”¹å†™ä¸Šé¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;h5 id=&#34;master-js-1&#34;&gt;master.js&lt;/h5&gt;

&lt;p&gt;master ä¸­å°±å¯ä»¥ç§»é™¤ä¸Šé¢è½¬å‘æ¶ˆæ¯çš„é€»è¾‘ï¼Œä½†æ˜¯ä¸€å®šè¦å¼•å…¥ &lt;strong&gt;clusterhub&lt;/strong&gt; æ¨¡å—ï¼Œå³ä½¿ master ä¸­ä¸è°ƒç”¨ &lt;strong&gt;clusterhub&lt;/strong&gt; APIï¼Œå› ä¸º &lt;strong&gt;clusterhub&lt;/strong&gt; å†…éƒ¨è¦åœ¨ master è¿›ç¨‹ä¸­æ³¨å†Œä»£ç†çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cluster&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;os&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cpus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æ³¨æ„å¼•å…¥ clusterhub
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;clusterhub&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isMaster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Master &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; is running`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Fork workers.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPUs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;exit&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; died`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// accidental exit, add new worker
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exitedAfterDisconnect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./worker&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;worker-js-1&#34;&gt;worker.js&lt;/h5&gt;

&lt;p&gt;worker ä¸­å°±ä¸éœ€è¦ç›‘å¬ &lt;code&gt;process message&lt;/code&gt; äº‹ä»¶äº†ï¼Œç›´æ¥åœ¨ &lt;strong&gt;hub&lt;/strong&gt; ä¸Šç›‘å¬ &lt;code&gt;SYNC_REQUEST&lt;/code&gt; äº‹ä»¶ï¼Œä¸å…¶å®ƒ workers åŒæ­¥ IP æ—¶è°ƒç”¨ &lt;code&gt;hub.emitRemote()&lt;/code&gt;ï¼Œ&lt;strong&gt;clusterhub&lt;/strong&gt; ä¼šåœ¨å†…éƒ¨å°è£…ä¿¡æ¯å‘é€ç»™ masterï¼Œmaster å†è½¬å‘ç»™å…¶å®ƒ workersã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;clusterhub&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Workers can share any TCP connection
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// In this case it is an HTTP server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;x-forwarded-for&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;remoteAddress&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syncRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;warn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`[&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;] IP: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; exceeded the maximum request quantity!`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Too many requests!&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;hello world\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// listen SYNC_REQUEST on hub
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SYNC_REQUEST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// increase ip request number and notify other workers by hub.emitRemote()
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syncRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ipRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;emitRemote&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;SYNC_REQUEST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; started`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æµ‹è¯•ç»“æœåŒä¸Šã€‚&lt;strong&gt;clusterhub&lt;/strong&gt; çœå»äº†æˆ‘ä»¬æ‰‹åŠ¨å®ç° master ä»£ç†é€»è¾‘çš„æµç¨‹ï¼Œè¿˜æä¾›åœ¨å½“å‰è¿›ç¨‹è§¦å‘äº‹ä»¶çš„ API &lt;a href=&#34;https://github.com/fent/clusterhub#hubemitlocalevent-args&#34;&gt;clusterhub.emitLocal()&lt;/a&gt; ã€‚å¦å¤– &lt;strong&gt;clusterhub&lt;/strong&gt; å¼•å…¥äº† &lt;a href=&#34;https://github.com/hij1nx/EventVat&#34;&gt;EventVat&lt;/a&gt; ä½œä¸ºè·¨è¿›ç¨‹çš„ key-value æ•°æ®åº“ï¼Œè¿™ä¸å°±æ˜¯å‰é¢æåˆ°çš„ç¬¬ä¸‰æ–¹çŠ¶æ€ç®¡ç†å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;äº‹æƒ…å˜å¾—æ›´ç®€å•äº†ï¼Œç›´æ¥æŠŠ IP è¯·æ±‚è®°å½•å­˜åˆ° master - workers å…±äº«çš„ key-value DB é‡Œï¼Œæ¯æ¬¡å¤„ç† IP è¯·æ±‚æ—¶ï¼Œé¦–å…ˆä» DB å¼‚æ­¥è·å–åˆ°å½“å‰ IP ç´¯è®¡è¯·æ±‚æ•°ï¼Œç„¶åå†å†³å®šæ˜¯å¦é™æµï¼›è™½ç„¶å¢åŠ äº† HTTP å¤„ç†å»¶è¿Ÿï¼Œä½†åœ¨é€»è¾‘ä¸Šæé«˜äº†å‡†ç¡®ç‡å’Œåˆç†æ€§ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;clusterhub&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Workers can share any TCP connection
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// In this case it is an HTTP server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;x-forwarded-for&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;remoteAddress&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// increment the IP integer value in key-value db
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;incr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// first get the IP integer value asynchronously, then decide whether to limit
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;hub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MAX_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;warn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`[&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;] IP: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;realIP&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; exceeded the maximum request quantity!`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Too many requests!&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;writeHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;hello world\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Worker &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; started`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;æµ‹è¯•-1&#34;&gt;æµ‹è¯•&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;ab&lt;/code&gt; å‘½ä»¤è®¾ç½®åœ¨ 1000 è¯·æ±‚æ•°ï¼Œå¹¶å‘ 100 çš„æ¡ä»¶ä¸‹ï¼Œå¯¹é˜ˆå€¼ä¸º 100 çš„ä¾‹å­è¿›è¡Œæµ‹è¯•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ab -H &lt;span class=&#34;s1&#34;&gt;&amp;#39;x-forwarded-for: 0.0.0.5&amp;#39;&lt;/span&gt; -n &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt; -c &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; localhost:8000/

Concurrency Level:      &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;
Time taken &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; tests:   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.244 seconds
Complete requests:      &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;
Failed requests:        &lt;span class=&#34;m&#34;&gt;900&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æµ‹è¯•ç»“æœè¡¨ç¤ºåªæœ‰ 100 ä¸ªè¯·æ±‚æˆåŠŸäº†ï¼Œè¯´æ˜ç¬¦åˆé¢„æœŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æœ¬æ–‡é¦–å…ˆä»‹ç»äº† Node Cluster ç›¸æ¯” Node å•è¿›ç¨‹çš„ä¼˜åŠ¿ï¼Œå¹¶å±•ç¤ºäº† Cluster çš„ç®€å•å®è·µï¼Œç„¶åå¼•å‡º cluster workers IPC çš„é—®é¢˜ï¼Œç»™å‡ºä¸¤ç§å®ç°æ–¹å¼ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Unix Domain Socket IPC&lt;/li&gt;
&lt;li&gt;Master ä»£ç†&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŸºäº Master ä»£ç†æ–¹å¼å®è·µäº†ä¸€ä¸ª IP é™æµçš„ä¾‹å­ï¼ŒæŒ‡å‡ºå­˜åœ¨çš„é—®é¢˜ï¼ˆå¹¶å‘ã€å¼‚æ­¥ã€å…±äº«çŠ¶æ€ç®¡ç†ï¼‰ï¼Œæœ€åå¼•å…¥ &lt;strong&gt;clusterhub&lt;/strong&gt; æ¨¡å—åšä¼˜åŒ–ï¼Œåˆæ­¥è§£å†³äº†æåˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;libuv åˆ›å»ºçš„ master - worker IPC ä¸º workers IPC æä¾›äº†ä¸€æ¡æ·å¾„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190627003616.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>Vue MVVM å®ç°ï¼ˆProxy ç¯‡ï¼‰</title>
      <link>https://jancat.github.io/post/2019/vue-mvvm-proxy/</link>
      <pubDate>Sat, 20 Apr 2019 10:32:43 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2019/vue-mvvm-proxy/</guid>
      
        <description>

&lt;p&gt;&lt;a href=&#34;https://jancat.github.io/post/2019/vue-mvvm/&#34;&gt;ä¸Šä¸€ç¯‡&lt;/a&gt;å®ç° MVVM &lt;strong&gt;æ•°æ®åŠ«æŒ&lt;/strong&gt;æ˜¯åŸºäº ES5 çš„ &lt;code&gt;Object.defineProperty()&lt;/code&gt; APIï¼Œæ–°çš„è½®å­å°†ä½¿ç”¨ &lt;code&gt;Proxy&lt;/code&gt; æ›¿ä»£ï¼Œfollow Vue 3ï¼›åœ¨åŸæœ‰è½®å­çš„åŸºç¡€ä¸Šåšäº›æ”¹é€ ï¼Œé€‚é… &lt;code&gt;Proxy&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Object.defineProperty()&lt;/code&gt; å’Œ &lt;code&gt;Proxy&lt;/code&gt; å®ç° MVVM æ•°æ®åŠ«æŒçš„åŒºåˆ«æ˜¯ï¼š&lt;code&gt;Object.defineProperty()&lt;/code&gt; éœ€è¦ä¸ºæ¯ä¸ª key å®šä¹‰ getter å’Œ setterï¼Œä¹Ÿå°±æ˜¯éœ€è¦éå† &lt;code&gt;data&lt;/code&gt; ä¸‹çš„å…¨éƒ¨å­å±æ€§ï¼›è€Œ &lt;code&gt;Proxy&lt;/code&gt; åªéœ€è¦ä¸º &lt;code&gt;data&lt;/code&gt; æœ¬èº«å’Œå†…éƒ¨åµŒå¥—çš„å¯¹è±¡åˆ›å»ºä»£ç†ï¼Œæ¯ä¸ªå¯¹è±¡ç»Ÿä¸€ä»£ç†è®¿é—®å†…éƒ¨å±æ€§ï¼Œå¯¹å¤–æä¾›ä»£ç†çš„å¼•ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&#34;mvvm-proxy-åŸç†å®ç°&#34;&gt;MVVM Proxy åŸç†å®ç°&lt;/h2&gt;

&lt;p&gt;æ•ˆæœï¼ˆåŒä¸Šä¸€ä¸ªè½®å­ï¼‰ï¼š&lt;/p&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/w2204y1jm5?autoresize=1&amp;fontsize=14&amp;hidenavigation=1&amp;view=preview&#34; title=&#34;vue-mvvm-proxy&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;index.html&lt;/strong&gt; å’Œ &lt;strong&gt;Compiler&lt;/strong&gt; æ¨¡å—ä¸éœ€è¦æ”¹åŠ¨ï¼Œè¯¦æƒ…è§ &lt;a href=&#34;https://jancat.github.io/post/2019/vue-mvvm/&#34;&gt;ä¸Šä¸€ç¯‡&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;mvvm-æ¨¡å—&#34;&gt;MVVM æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/w2204y1jm5?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FMVVM.js&amp;view=editor&#34; title=&#34;vue-mvvm-proxy&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;MVVM&lt;/strong&gt; åˆå§‹åŒ–æ—¶éœ€è¦ä»£ç† &lt;code&gt;this.xxx&lt;/code&gt; åˆ° &lt;code&gt;this.$data.xxx&lt;/code&gt; æˆ–è€… &lt;code&gt;options.computed.xxx&lt;/code&gt;ï¼Œæ‰€ä»¥ç»™ &lt;code&gt;this&lt;/code&gt; åˆ›å»ºä¸€ä¸ª &lt;code&gt;Proxy&lt;/code&gt; ä»£ç†ï¼Œåˆ¤æ–­ &lt;code&gt;key&lt;/code&gt; åœ¨ &lt;code&gt;this&lt;/code&gt; æœ¬èº«ã€&lt;code&gt;data&lt;/code&gt;ã€&lt;code&gt;methods&lt;/code&gt;ã€&lt;code&gt;computed&lt;/code&gt; ä¸­ï¼Œåˆ†åˆ«é€šè¿‡ &lt;code&gt;Reflect.get()&lt;/code&gt; åœ¨å¯¹åº”çš„ object ä¸Šè·å– key å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;_proxyThis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Proxy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// è®¿é—® MVVM å®ä¾‹å±æ€§
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// è®¿é—® data å±æ€§
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// è®¿é—® method
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// è®¿é—® computed å±æ€§
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;function&amp;#39;&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// è®¾ç½® data å±æ€§
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;new Proxy(this, handler)&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;this&lt;/code&gt; ä»£ç†éœ€è¦ä½œä¸º &lt;code&gt;MVVM&lt;/code&gt; æ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡è¿”å›ï¼Œå› ä¸ºæä¾›ç»™å¤–éƒ¨è®¿é—®çš„æ˜¯ä»£ç†ï¼Œå³ &lt;code&gt;this._vm&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;constructor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_vm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_proxyThis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_vm&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åå°† &lt;code&gt;methods&lt;/code&gt; å‡½æ•°ä¸­çš„ &lt;code&gt;this&lt;/code&gt; ç»‘å®šåˆ° &lt;code&gt;this._vm&lt;/code&gt; ä¸Š:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;_bindMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;
  &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;forEach&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è°ƒç”¨ &lt;code&gt;Observer&lt;/code&gt; ç»™ &lt;code&gt;options.data&lt;/code&gt; å’ŒåµŒå¥—å¯¹è±¡åˆ›å»ºä»£ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æœ€åè¿˜æ˜¯ä¸€æ ·è°ƒç”¨ &lt;code&gt;Compiler&lt;/code&gt; è§£ææ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$compile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Compiler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;dep-æ¨¡å—&#34;&gt;Dep æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/w2204y1jm5?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FDep.js&amp;view=editor&#34; title=&#34;vue-mvvm-proxy&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Dep&lt;/strong&gt; æ¨¡å—å­˜å‚¨ç»“æ„è·Ÿä¸Šä¸ªè½®å­çš„ Dep ä¸åŒï¼Œå› ä¸ºä½¿ç”¨ &lt;code&gt;Proxy&lt;/code&gt; ä»£ç†åï¼Œåªèƒ½ä¸ºæ¯ä¸ªå¯¹è±¡ç»‘å®šä¸€ä¸ª &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹ï¼Œä¸€ä¸ª &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹åŒ…å«è¯¥å¯¹è±¡å†…éƒ¨&lt;strong&gt;æ‰€æœ‰å±æ€§&lt;/strong&gt;çš„è®¢é˜…è€…ï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„ä¸€ä¸ªå±æ€§ä¸€ä¸ª &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†ä¿è¯å­˜å‚¨è®¢é˜…è€…çš„æ•°æ®ç»“æ„çš„å”¯ä¸€æ€§ï¼Œä½¿ç”¨ &lt;strong&gt;Set&lt;/strong&gt; ç»“æ„ä¿è¯è®¢é˜…è€…ä¸ä¼šé‡å¤ï¼›å¤–å±‚ä½¿ç”¨ &lt;strong&gt;Map&lt;/strong&gt; ç»“æ„å­˜å‚¨ &lt;strong&gt;key - Set&lt;/strong&gt; çš„æ˜ å°„å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;è®¢é˜…ä¸­å¿ƒæä¾›çš„æ¯ä¸ªæ¥å£ï¼Œéƒ½éœ€è¦ &lt;code&gt;key&lt;/code&gt; å’Œ &lt;code&gt;sub&lt;/code&gt; å‚æ•°ï¼Œæ ¹æ® &lt;code&gt;key&lt;/code&gt; æ‰¾å‡º &lt;strong&gt;Map&lt;/strong&gt; ä¸­æ˜ å°„çš„ &lt;strong&gt;Set&lt;/strong&gt;ï¼Œåœ¨è®¢é˜…è€… &lt;strong&gt;Set&lt;/strong&gt; ä¸­è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;

&lt;h3 id=&#34;observer-æ¨¡å—&#34;&gt;Observer æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/w2204y1jm5?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FObserver.js&amp;view=editor&#34; title=&#34;vue-mvvm-proxy&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Observer&lt;/strong&gt; æ¨¡å—ä½¿ç”¨ &lt;code&gt;Proxy&lt;/code&gt; ä»£ç† &lt;code&gt;data&lt;/code&gt; ä¸­åµŒå¥—å¯¹è±¡çš„è®¿é—®ã€‚&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºçš„ &lt;code&gt;observe&lt;/code&gt; å‡½æ•°é€’å½’éå† &lt;code&gt;data&lt;/code&gt; å†…éƒ¨å±æ€§ï¼Œé‡åˆ°å¯¹è±¡å°±åˆ›å»ºä¸€ä¸ª &lt;code&gt;Proxy&lt;/code&gt; è¦†ç›–åŸå§‹å¯¹è±¡å€¼ï¼Œæœ€åè¿”å› &lt;code&gt;data&lt;/code&gt; å¯¹è±¡çš„ä»£ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// data ä¸æ˜¯å¯¹è±¡æ— æ³•åŠ«æŒï¼Œå¿½ç•¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;object&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ·±åº¦ç›‘å¬
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;forEach&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Observer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;proxyObject&lt;/code&gt; å‡½æ•°ä¸º &lt;code&gt;data&lt;/code&gt; ä¸­çš„æ¯ä¸ªåµŒå¥—å¯¹è±¡åˆ›å»ºä»£ç†å’Œç»‘å®šçš„ &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹ã€‚è·Ÿä¸Šä¸ªè½®å­ä¸åŒï¼Œåœ¨ getter ä¸­ï¼Œè¿™é‡Œç®€åŒ–äº†æ·»åŠ è®¢é˜…è€…çš„é€»è¾‘ï¼Œå¦‚æœåˆ¤æ–­ &lt;code&gt;Dep.target&lt;/code&gt; å­˜åœ¨ï¼Œç›´æ¥é€šè¿‡é—­åŒ…åœ¨ç»‘å®šçš„ &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹ä¸ŠæŠŠè®¢é˜…è¯¥ &lt;code&gt;key&lt;/code&gt; çš„ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹æ·»åŠ åˆ°è®¢é˜…è€…ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;proxyObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Proxy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// å¦‚æœè®¢é˜…è€…å­˜åœ¨ï¼Œç›´æ¥æ·»åŠ è®¢é˜…
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;addSub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Reflect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;receiver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;notify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;watcher-æ¨¡å—&#34;&gt;Watcher æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/w2204y1jm5?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FWatcher.js&amp;view=editor&#34; title=&#34;vue-mvvm-proxy&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;å› ä¸ºæ·»åŠ è®¢é˜…è€…çš„é€»è¾‘å·²ç»åœ¨ &lt;code&gt;Observer&lt;/code&gt; æ¨¡å—åšäº†ï¼Œæ‰€ä»¥ &lt;code&gt;Watcher&lt;/code&gt; æ¨¡å—åˆ é™¤äº† &lt;code&gt;applyDep()&lt;/code&gt; æ–¹æ³•ï¼Œå…¶å®ƒä¸å˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// applyDep(dep) {
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//   if (!this.depIds.hasOwnProperty(dep.id)) {
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//     dep.addSub(this)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//     this.depIds[dep.id] = dep
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//   }
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// }
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;æ–°çš„æ¨¡å—å…³ç³»å›¾&#34;&gt;æ–°çš„æ¨¡å—å…³ç³»å›¾&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190426164617.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Vue 3.0 ä½¿ç”¨äº† &lt;strong&gt;Proxy&lt;/strong&gt; åï¼Œå°†ä¼šæ¶ˆé™¤ä¹‹å‰  Vue 2.x ä¸­åŸºäº &lt;code&gt;Object.defineProperty&lt;/code&gt; çš„å®ç°æ‰€å­˜åœ¨çš„ä¸€äº›é™åˆ¶ï¼šæ— æ³•ç›‘å¬ &lt;strong&gt;å±æ€§çš„æ·»åŠ å’Œåˆ é™¤&lt;/strong&gt;ã€&lt;strong&gt;æ•°ç»„ç´¢å¼•å€¼å’Œé•¿åº¦çš„å˜æ›´&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;GitHub åœ°å€ï¼š&lt;a href=&#34;https://github.com/Jancat/vue-mvvm-proxy&#34;&gt;https://github.com/Jancat/vue-mvvm-proxy&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/xiaomuzhu/proxy-vue&#34;&gt;https://github.com/xiaomuzhu/proxy-vue&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Vue MVVM å®ç°ï¼ˆdefineProperty ç¯‡ï¼‰</title>
      <link>https://jancat.github.io/post/2019/vue-mvvm/</link>
      <pubDate>Fri, 19 Apr 2019 23:33:14 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2019/vue-mvvm/</guid>
      
        <description>&lt;p&gt;&lt;img src=&#34;https://cn.vuejs.org/images/data.png&#34; alt=&#34;Vue MVVM Poster&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;vue-å“åº”å¼åŸç†&#34;&gt;Vue å“åº”å¼åŸç†&lt;/h2&gt;

&lt;p&gt;Vue 2.x çš„å“åº”å¼åŸç†æ˜¯é€šè¿‡ &lt;strong&gt;æ•°æ®åŠ«æŒ&lt;/strong&gt; å’Œ &lt;strong&gt;å‘å¸ƒ-è®¢é˜…&lt;/strong&gt;æ¨¡å¼å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;åˆå§‹åŒ– Vue å®ä¾‹æ—¶å†…éƒ¨å°±ä¼šå®šä¹‰æ•°æ®åŠ«æŒå’Œåˆ›å»ºå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/20190427110242.png&#34; alt=&#34;Vue MVVM&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ•°æ®åŠ«æŒ&#34;&gt;æ•°æ®åŠ«æŒ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;æ•°æ®åŠ«æŒ&lt;/strong&gt; é€šè¿‡ &lt;code&gt;Object.defineProperty()&lt;/code&gt; åŠ«æŒä¼ å…¥çš„ &lt;code&gt;data&lt;/code&gt;ï¼Œå¯¹ &lt;code&gt;data&lt;/code&gt; å±æ€§(åŒ…æ‹¬åµŒå¥—å¯¹è±¡) çš„æ“ä½œè¿›è¡Œç›‘å¬ï¼ˆé€šè¿‡ getter/setterï¼‰ï¼Œä»è€Œè§¦å‘ä¸€ç³»åˆ—å“åº”ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;a href=&#34;https://cn.vuejs.org/v2/guide/reactivity.html&#34;&gt;å®˜æ–¹æ–‡æ¡£-æ·±å…¥å“åº”å¼åŸç†&lt;/a&gt; ä¸­ä¹Ÿè¯´æ˜äº† Vue åœ¨åˆå§‹åŒ–å®ä¾‹å &lt;strong&gt;æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤&lt;/strong&gt;ï¼Œéœ€è¦é€šè¿‡ &lt;code&gt;Vue.set(vm.someObject, &#39;b&#39;, 2)&lt;/code&gt; æˆ–è€… &lt;code&gt;this.$set(this.someObject,&#39;b&#39;,2)&lt;/code&gt; çš„æ–¹å¼åŠ¨æ€æ·»åŠ æ–°çš„å“åº”å¼å±æ€§ï¼Œå³ç»™æ–°çš„å±æ€§æ·»åŠ  getter/setterã€‚&lt;/p&gt;

&lt;h3 id=&#34;å‘å¸ƒ-è®¢é˜…&#34;&gt;å‘å¸ƒ-è®¢é˜…&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å‘å¸ƒ-è®¢é˜…&lt;/strong&gt;æ¨¡å¼æ˜¯æ•°æ®åŠ«æŒä¹‹åçš„å“åº”ï¼Œè®¢é˜…ä¸­å¿ƒ &lt;strong&gt;Dep&lt;/strong&gt; æ”¶é›†å¯¹ &lt;strong&gt;Data&lt;/strong&gt; å„ä¸ªå±æ€§çš„ä¾èµ–ï¼Œ&lt;strong&gt;Watcher&lt;/strong&gt; ä½œä¸ºè®¢é˜…è€…è®¢é˜…è¿™äº›ä¾èµ–ï¼›ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥å¯¹åº”çš„ &lt;strong&gt;Watcher&lt;/strong&gt;ï¼Œä»è€Œè§¦å‘æ›´æ–°ã€‚&lt;/p&gt;

&lt;h3 id=&#34;mvvm-å„æ¨¡å—èŒè´£&#34;&gt;MVVM å„æ¨¡å—èŒè´£&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MVVM&lt;/strong&gt;: Vue å®ä¾‹åˆå§‹åŒ–ï¼Œè°ƒç”¨ &lt;strong&gt;Observer&lt;/strong&gt; æ•°æ®åŠ«æŒï¼Œè°ƒç”¨ &lt;strong&gt;Compiler&lt;/strong&gt; è§£ææ¨¡æ¿ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Observer&lt;/strong&gt;: åŠ«æŒ data å…¨éƒ¨å±æ€§ï¼Œå®šä¹‰ setter ã€getterï¼Œæ·»åŠ å’Œé€šçŸ¥è®¢é˜…è€…ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Compiler&lt;/strong&gt;: è§£ææ¨¡æ¿åˆå§‹åŒ–è§†å›¾ï¼Œæ”¶é›†æ¨¡æ¿ä¸­çš„æ•°æ®ä¾èµ–ï¼Œåˆ›å»ºè®¢é˜…è€…è®¢é˜…å˜åŒ–ï¼Œç»‘å®šæ›´æ–°å‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dep&lt;/strong&gt;ï¼šè®¢é˜…ä¸­å¿ƒï¼Œæä¾›æ·»åŠ ã€ç§»é™¤ã€é€šçŸ¥è®¢é˜…çš„æ¥å£ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Watcher&lt;/strong&gt;: data å±æ€§çš„è®¢é˜…è€…ï¼Œæ”¶åˆ°å˜åŒ–é€šçŸ¥åè°ƒç”¨æ›´æ–°å‡½æ•°æ›´æ–°è§†å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;mvvm-åŸç†å®ç°&#34;&gt;MVVM åŸç†å®ç°&lt;/h2&gt;

&lt;p&gt;ä¸ºäº†ç†è§£ Vue MVVM å†…éƒ¨åŸç†ï¼Œè¿™é‡Œé€ ä¸€ä¸ªç®€å•çš„ MVVM ä¼ªè½®å­ï¼Œèƒ½å¤Ÿå®ç°æ¨¡æ¿è§£æã€æ•°æ®å“åº”å¼ç­‰åŸºæœ¬åŠŸèƒ½ï¼Œå¿½ç•¥ç»†èŠ‚å’Œæ˜æ˜¾çš„ bugã€‚åŒæ—¶ï¼Œä¸ºäº†æ›´å®¹æ˜“ç†è§£å’Œæ›´å¥½çš„ coding ä½“éªŒï¼Œä½¿ç”¨ç°ä»£æµè§ˆå™¨æ”¯æŒçš„ ES6+ è¯­æ³•å®ç°ï¼Œåˆ’åˆ†å„ä¸ªæ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªè½®å­ä¸­å€ŸåŠ© ES5 çš„ &lt;code&gt;Object.defineProperty()&lt;/code&gt; å®ç°æ•°æ®åŠ«æŒï¼›åœ¨&lt;a href=&#34;https://jancat.github.io/post/2019/vue-mvvm-proxy/&#34;&gt;ä¸‹ä¸€ç¯‡&lt;/a&gt;ä¸­ï¼Œå°†ä¼šä½¿ç”¨ ES6 çš„ &lt;code&gt;Proxy&lt;/code&gt; å®ç°ï¼Œè¿™ä¹Ÿæ˜¯ Vue 3 çš„è®¡åˆ’ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;p&gt;æ•ˆæœï¼š&lt;/p&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=14&amp;hidenavigation=1&amp;view=preview&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;h3 id=&#34;index-html&#34;&gt;index.html&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;å…¥å£æ–‡ä»¶ï¼Œåˆ›å»ºæ¸²æŸ“æ¨¡æ¿ï¼Œé€šè¿‡ &lt;code&gt;v-model&lt;/code&gt; æŒ‡ä»¤åŒå‘ç»‘å®š &lt;code&gt;data&lt;/code&gt;ï¼ŒåŒç† &lt;code&gt;v-class&lt;/code&gt;ã€&lt;code&gt;v-text&lt;/code&gt;ã€&lt;code&gt;v-html&lt;/code&gt; æŒ‡ä»¤æ’å…¥ &lt;code&gt;data&lt;/code&gt; å€¼ï¼Œ&lt;code&gt;v-on:click&lt;/code&gt; ç»‘å®šç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ &lt;code&gt;method&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;module script&lt;/code&gt; ä¸­å¯¼å…¥å¹¶å®ä¾‹åŒ– MVVMï¼Œå®šä¹‰ &lt;code&gt;el&lt;/code&gt;ã€&lt;code&gt;data&lt;/code&gt;ã€&lt;code&gt;computed&lt;/code&gt;ã€&lt;code&gt;methods&lt;/code&gt;ã€&lt;code&gt;$watch&lt;/code&gt; optionsã€‚&lt;/p&gt;

&lt;h3 id=&#34;mvvm-æ¨¡å—&#34;&gt;MVVM æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FMVVM.js&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;MVVM æ„é€ å‡½æ•°ä¸­æŠŠ &lt;code&gt;options.data&lt;/code&gt;ã€&lt;code&gt;options.computed&lt;/code&gt;ã€&lt;code&gt;options.methods&lt;/code&gt; ä¸­çš„å±æ€§å…¨éƒ¨ç»‘å®šåˆ° MVVM &lt;code&gt;this&lt;/code&gt; ä¸Šï¼Œè¿™æ ·å°±èƒ½åœ¨ &lt;code&gt;methods&lt;/code&gt; ä¸­é€šè¿‡ &lt;code&gt;this.xxx&lt;/code&gt; ä»£ç†åˆ°å„è‡ªçš„ key ä¸­ï¼Œæš‚æ—¶ä¸è€ƒè™‘é‡å¤çš„ keyã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// data ä»£ç†ï¼Œå®ç° vm.xxx, this.xxx -&amp;gt; vm.$data.xxx
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_proxyData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;defineProperty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;configurable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;enumerable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// computed å±æ€§ä»£ç†ï¼Œå®ç° vm.xxx, this.xxx -&amp;gt; this.$options.computed.xxx
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_proxyComputed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;object&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;defineProperty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;function&amp;#39;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;computed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// ç»‘å®š options.methods çš„æ–¹æ³•åˆ° this ä¸Š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_bindMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;object&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;defineProperty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åˆå§‹åŒ– &lt;code&gt;this&lt;/code&gt; ä»£ç†åï¼Œè°ƒç”¨ &lt;code&gt;Observer&lt;/code&gt; åŠ«æŒ &lt;code&gt;data&lt;/code&gt; ä¸­çš„å…¨éƒ¨å±æ€§ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æœ€åï¼Œè°ƒç”¨ &lt;code&gt;Compiler&lt;/code&gt; è§£ææ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;$compile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Compiler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;MVVM å®ä¾‹ä¹Ÿæä¾›äº† &lt;code&gt;$watch&lt;/code&gt; æ–¹æ³•ï¼Œè°ƒç”¨ &lt;code&gt;Watcher&lt;/code&gt; ç›‘å¬æŒ‡å®šå±æ€§çš„å˜åŒ–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;$watch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Watcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;dep-æ¨¡å—&#34;&gt;Dep æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FDep.js&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Dep&lt;/strong&gt; æ¨¡å—ä½œä¸º&lt;strong&gt;å‘å¸ƒ-è®¢é˜…&lt;/strong&gt;æ¨¡å¼çš„è®¢é˜…ä¸­å¿ƒï¼Œæ¯ä¸ª &lt;code&gt;data&lt;/code&gt; ä¸­çš„å±æ€§(åŒ…æ‹¬åµŒå¥—) éƒ½ç»‘å®šäº†ä¸€ä¸ª &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹(é€šè¿‡é—­åŒ…å¼•ç”¨)ï¼Œæä¾›æ·»åŠ ã€é€šçŸ¥ã€ç§»é™¤è®¢é˜…è€…çš„æ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªå±æ€§ç»‘å®šçš„ &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹å¯ä»¥åŒ…å«å¤šä¸ªè®¢é˜…è¯¥å±æ€§çš„ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹ï¼Œå±æ€§å˜åŒ–åï¼Œå°†é€šçŸ¥è¿™äº› &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;observer-æ¨¡å—&#34;&gt;Observer æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FObserver.js&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Observer&lt;/strong&gt; æ¨¡å—ä¾èµ– &lt;strong&gt;Dep&lt;/strong&gt; æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;Observer æ„é€ å‡½æ•°é€’å½’åŠ«æŒ &lt;code&gt;data&lt;/code&gt; ä¸­çš„å…¨éƒ¨å±æ€§ï¼Œå®šä¹‰ getter å’Œ setterï¼ŒåŒæ—¶ä¸ºæ¯ä¸ªå±æ€§ç»‘å®šä¸€ä¸ª Dep å®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å±æ€§çš„ getter ä¸­åˆ¤æ–­å½“å‰ &lt;code&gt;Dep.target&lt;/code&gt; æ˜¯å¦æŒ‡å‘ä¸€ä¸ª &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æŠŠè¯¥ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹ä½œä¸ºå±æ€§è®¢é˜…è€…æ·»åŠ åˆ° &lt;code&gt;Dep&lt;/code&gt; ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è®¿é—®è¯¥ key æ—¶å¦‚æœ Dep.target æŒ‡å‘ Watcher å®ä¾‹ï¼ŒæŠŠè¯¥ key å¯¹åº”çš„ Dep å®ä¾‹ä¼ é€’ç»™ Watcher å®ä¾‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ä¹Ÿå¯ä»¥ç›´æ¥ dep.addSub(Dep.target)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;depend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨å±æ€§çš„ setter ä¸­å½“å€¼å˜åŒ–åé€šè¿‡é—­åŒ…å¼•ç”¨çš„ &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹é€šçŸ¥è®¢é˜…è€…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// æ–°çš„å€¼æ˜¯objectçš„è¯ï¼Œè¿›è¡Œç›‘å¬
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;observe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;newVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// é€šçŸ¥è®¢é˜…è¯¥ key çš„ Watcher å®ä¾‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;notify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;observer-named-export&#34;&gt;Observer named export&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;Observer&lt;/code&gt; æ¨¡å—å¯¼å‡ºçš„ä¸æ˜¯ &lt;code&gt;Observer class&lt;/code&gt;ï¼Œè€Œæ˜¯ &lt;code&gt;observe&lt;/code&gt; å‡½æ•°ï¼Œç”¨äºé€’å½’å®ä¾‹åŒ– &lt;code&gt;Observer&lt;/code&gt; åŠ«æŒåµŒå¥—çš„ &lt;code&gt;data key&lt;/code&gt; å¯¹è±¡ã€‚ç›¸å½“äº &lt;code&gt;data&lt;/code&gt; ä¸­çš„æ¯ä¸ªåµŒå¥—å¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ª &lt;code&gt;Observer&lt;/code&gt; å®ä¾‹ï¼ŒåŒ…æ‹¬ &lt;code&gt;data&lt;/code&gt; æœ¬èº«ã€‚ä¸è¿‡åœ¨è¿™ä¸ªè½®å­ä¸­æ²¡æœ‰ç”¨åˆ° &lt;code&gt;Observer&lt;/code&gt; å®ä¾‹çš„å¼•ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&#34;watcher-æ¨¡å—&#34;&gt;Watcher æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FWatcher.js&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Watcher&lt;/strong&gt; æ¨¡å—ä¾èµ– &lt;strong&gt;Dep&lt;/strong&gt; æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Watcher&lt;/code&gt; åœ¨åˆå§‹åŒ–æ—¶å°†ä¼šæŠŠ &lt;code&gt;Dep.target&lt;/code&gt; æŒ‡å‘è‡ªèº«çš„ &lt;code&gt;this&lt;/code&gt;ï¼Œç„¶åè®¿é—®ç›‘å¬çš„å±æ€§ï¼Œè§¦å‘ &lt;code&gt;Observer&lt;/code&gt; ä¸­å®šä¹‰çš„å±æ€§ getterï¼Œä»è€ŒæŠŠå½“å‰ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹æ·»åŠ åˆ°å±æ€§è®¢é˜…è€…ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è·å– Wacher å®ä¾‹ç›‘è§†çš„å€¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_getValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è®¿é—®ç›‘å¬çš„å±æ€§æ—¶æŠŠ Dep.target æŒ‡å‘è‡ªèº«ï¼Œä»è€Œåœ¨ Observer ä¸­æŠŠå½“å‰å®ä¾‹æ·»åŠ åˆ°å±æ€§è®¢é˜…è€…ä¸­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// è·å–å±æ€§å€¼åç½®ç©º Dep.target
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;Dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;ç›‘å¬åµŒå¥—å±æ€§&#34;&gt;ç›‘å¬åµŒå¥—å±æ€§&lt;/h4&gt;

&lt;p&gt;å¦‚æœ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹ç›‘å¬çš„æ˜¯åµŒå¥—å±æ€§ï¼Œæ¯”å¦‚ &lt;code&gt;a.b.c&lt;/code&gt;ï¼Œå…³æ³¨çš„æ˜¯ &lt;code&gt;c&lt;/code&gt; å€¼çš„å˜åŒ–ã€‚åˆ™åœ¨è®¿é—® &lt;code&gt;a&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;a&lt;/code&gt; ç»‘å®šçš„ &lt;code&gt;Dep&lt;/code&gt; å®ä¾‹ä¼šæŠŠå½“å‰ &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹æ·»åŠ åˆ°è®¢é˜…è€…ä¸­ï¼ŒåŒç† &lt;code&gt;b&lt;/code&gt;ã€&lt;code&gt;c&lt;/code&gt;ï¼Œå³ä¸€ä¸ª &lt;code&gt;Watcher&lt;/code&gt; å®ä¾‹çš„å¼•ç”¨åŒæ—¶å­˜åœ¨äºåµŒå¥—å±æ€§çš„çˆ¶å±æ€§ &lt;code&gt;Dep&lt;/code&gt; è®¢é˜…è€…ä¸­ï¼›å½“çˆ¶å±æ€§å€¼å˜åŒ–æ—¶ï¼Œä¹Ÿä¼šé€šçŸ¥åˆ°å­å±æ€§çš„è®¢é˜…è€…ã€‚&lt;/p&gt;

&lt;h4 id=&#34;é‡å¤çš„-dep&#34;&gt;é‡å¤çš„ Dep&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;applyDep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;depIds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hasOwnProperty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;addSub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;depIds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dep&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å‡å¦‚ç›¸åº”å±æ€§çš„ &lt;code&gt;dep.id&lt;/code&gt; å·²ç»åœ¨å½“å‰ &lt;code&gt;watcher&lt;/code&gt; çš„ &lt;code&gt;depIds&lt;/code&gt; é‡Œï¼Œè¯´æ˜ä¸æ˜¯ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œä»…ä»…æ˜¯æ”¹å˜äº†å…¶å€¼è€Œå·²ï¼Œåˆ™ä¸éœ€è¦å°†å½“å‰ &lt;code&gt;watcher&lt;/code&gt; æ·»åŠ åˆ°è¯¥å±æ€§çš„ &lt;code&gt;dep&lt;/code&gt; é‡Œã€‚&lt;/p&gt;

&lt;p&gt;å‡å¦‚ç›¸åº”å±æ€§æ˜¯æ–°çš„å±æ€§ï¼Œåˆ™å°†å½“å‰ &lt;code&gt;watcher&lt;/code&gt; æ·»åŠ åˆ°æ–°å±æ€§çš„&lt;code&gt;dep&lt;/code&gt;é‡Œï¼Œå¦‚é€šè¿‡ &lt;code&gt;vm.child = {name: &#39;a&#39;}&lt;/code&gt; æ”¹å˜äº† &lt;code&gt;child.name&lt;/code&gt; çš„å€¼ï¼Œ&lt;code&gt;child.name&lt;/code&gt; å°±æ˜¯ä¸ªæ–°å±æ€§ï¼Œåˆ™éœ€è¦å°†å½“å‰&lt;code&gt;watcher(child.name)&lt;/code&gt;åŠ å…¥åˆ°æ–°çš„ &lt;code&gt;child.name&lt;/code&gt; çš„&lt;code&gt;dep&lt;/code&gt;é‡Œã€‚å› ä¸ºæ­¤æ—¶ &lt;code&gt;child.name&lt;/code&gt; æ˜¯ä¸ªæ–°å€¼ï¼Œä¹‹å‰çš„ &lt;code&gt;setter&lt;/code&gt;ã€&lt;code&gt;dep&lt;/code&gt; éƒ½å·²ç»å¤±æ•ˆï¼Œå¦‚æœä¸æŠŠ &lt;code&gt;watcher&lt;/code&gt; åŠ å…¥åˆ°æ–°çš„ &lt;code&gt;child.name&lt;/code&gt; çš„&lt;code&gt;dep&lt;/code&gt;ä¸­ï¼Œé€šè¿‡ &lt;code&gt;child.name = xxx&lt;/code&gt; èµ‹å€¼çš„æ—¶å€™ï¼Œå¯¹åº”çš„ &lt;code&gt;watcher&lt;/code&gt; å°±æ”¶ä¸åˆ°é€šçŸ¥ï¼Œç­‰äºå¤±æ•ˆäº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;compiler-æ¨¡å—&#34;&gt;Compiler æ¨¡å—&lt;/h3&gt;

&lt;iframe src=&#34;https://codesandbox.io/embed/q7j083qmyq?autoresize=1&amp;fontsize=16&amp;hidenavigation=1&amp;module=%2FCompiler.js&amp;view=editor&#34; title=&#34;vue-mvvm&#34; style=&#34;width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;&#34; sandbox=&#34;allow-modals allow-forms allow-popups allow-scripts allow-same-origin&#34;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;strong&gt;Compiler&lt;/strong&gt; æ¨¡å—ä¾èµ– &lt;strong&gt;Watcher&lt;/strong&gt; æ¨¡å—ã€‚&lt;/p&gt;

&lt;h4 id=&#34;documentfragment&#34;&gt;DocumentFragment&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;Compiler&lt;/code&gt; å®ä¾‹åŒ–æ—¶å…ˆæŠŠæ¨¡æ¿èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å…¨éƒ¨è½¬ç§»åˆ° &lt;code&gt;DocumentFragment&lt;/code&gt; ä¸­è¿›è¡ŒèŠ‚ç‚¹æ“ä½œï¼Œé¿å…é¢‘ç¹ reflowï¼Œå½±å“æ€§èƒ½ï¼›åœ¨æ¨¡æ¿è§£æå®Œåå†æŠŠ &lt;code&gt;DocumentFragment&lt;/code&gt; è½¬ç§»åˆ°æ ¹èŠ‚ç‚¹ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nodeToFragment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fragment&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createDocumentFragment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// å°†åŸç”ŸèŠ‚ç‚¹ç§»åŠ¨åˆ°fragment
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;child&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;firstChild&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;child&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;fragment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;appendChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;child&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;child&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;firstChild&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fragment&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;æŒ‡ä»¤è§£æ&#34;&gt;æŒ‡ä»¤è§£æ&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;Compiler&lt;/code&gt; è§£ææ¨¡æ¿ä¸­çš„ &lt;code&gt;v-&lt;/code&gt; å‰ç¼€çš„æŒ‡ä»¤å’Œ &lt;code&gt;{{ exp }}&lt;/code&gt; æ–‡æœ¬æ’å€¼è¡¨è¾¾å¼ï¼Œè¯¥è½®å­å¿½ç•¥ &lt;code&gt;JavaScript&lt;/code&gt; æ’å€¼è¡¨è¾¾å¼ã€‚èƒ½å¤Ÿè§£æçš„æŒ‡ä»¤æœ‰ &lt;code&gt;v-model&lt;/code&gt;ã€ &lt;code&gt;v-class&lt;/code&gt;ã€&lt;code&gt;v-text&lt;/code&gt;ã€&lt;code&gt;v-html&lt;/code&gt;ã€&lt;code&gt;v-on&lt;/code&gt;ï¼Œè¿™äº›æŒ‡ä»¤éƒ½æ˜¯å¼•ç”¨ &lt;code&gt;data&lt;/code&gt; ä¸­çš„å±æ€§ï¼Œè§¦å‘ &lt;code&gt;Observer&lt;/code&gt; å®šä¹‰çš„ getter å’Œ setterã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æŒ‡ä»¤å¤„ç†é›†åˆ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;compilerUtils&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;v-model-åŒå‘ç»‘å®š&#34;&gt;v-model åŒå‘ç»‘å®š&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;v-model&lt;/code&gt; æŒ‡ä»¤ç»‘å®šçš„å±æ€§ï¼Œ&lt;code&gt;View&lt;/code&gt; å’Œ &lt;code&gt;Model&lt;/code&gt; ä¸­çš„å€¼å˜åŒ–äº’ç›¸å½±å“ï¼Œå³åŒå‘ç»‘å®šã€‚&lt;/p&gt;

&lt;p&gt;ç›‘å¬ &lt;code&gt;v-model&lt;/code&gt; æŒ‡ä»¤æ‰€åœ¨çš„ &lt;code&gt;node input&lt;/code&gt; äº‹ä»¶ï¼Œ&lt;code&gt;input&lt;/code&gt; å˜åŒ–åé€šè¿‡ &lt;code&gt;vm.xxx&lt;/code&gt; æ”¹å˜å¯¹åº”çš„ &lt;code&gt;model&lt;/code&gt; å±æ€§å€¼ï¼Œè§¦å‘è¯¥å±æ€§å®šä¹‰çš„ setterï¼Œå³å®ç°äº† &lt;code&gt;View&lt;/code&gt; å½±å“ &lt;code&gt;Model&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;model&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_getVMVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;addEventListener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;input&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newValue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_setVMVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newValue&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;ç›‘å¬å±æ€§å˜åŒ–&#34;&gt;ç›‘å¬å±æ€§å˜åŒ–&lt;/h4&gt;

&lt;p&gt;æ¯ä¸ªæŒ‡ä»¤å¼•ç”¨çš„ &lt;code&gt;data&lt;/code&gt; å±æ€§éƒ½éœ€è¦å®ä¾‹åŒ– &lt;code&gt;Watcher&lt;/code&gt; è¿›è¡Œç›‘å¬ï¼Œå¹¶åŒæ—¶ç»‘å®šæ›´æ–°å‡½æ•°ç»™ &lt;code&gt;Watcher&lt;/code&gt; æ”¶åˆ°å˜åŒ–é€šçŸ¥åè°ƒç”¨ï¼Œæ›´æ–°è§†å›¾ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updaterFn&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Updater&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;updaterFn&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updaterFn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;_getVMVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Watcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;exp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;oldValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;updaterFn&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updaterFn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;oldValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;å±æ€§å€¼æ›´æ–°&#34;&gt;å±æ€§å€¼æ›´æ–°&lt;/h4&gt;

&lt;p&gt;ç›‘å¬çš„å±æ€§å€¼å˜åŒ–åï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½å¯¹åº”ä¸åŒçš„æ›´æ–°æ“ä½œï¼Œæ¯”å¦‚æ›¿æ¢ &lt;code&gt;textContent&lt;/code&gt;ã€&lt;code&gt;innerHTML&lt;/code&gt;ã€&lt;code&gt;value&lt;/code&gt; ç­‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updater&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;textUpdater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;textContent&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;typeof&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;undefined&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;htmlUpdater&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨è¿™ä¸ªè½®å­ä¸­ï¼Œæ›´æ–° DOM æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè€Œä¸”ä¸æ¶‰åŠ Virtual DOMã€‚åœ¨ Vue ä¸­ä¼šå¯¹ Virtual DOM æ›´æ–°ç„¶åç¼“å­˜åœ¨å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—ï¼Œåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ &lt;strong&gt;tick&lt;/strong&gt; ä¸­ flush åˆ° DOMã€‚&lt;/p&gt;

&lt;h3 id=&#34;å›é¡¾&#34;&gt;å›é¡¾&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;MVVM&lt;/strong&gt; æ¨¡å¼é™ä½äº† &lt;strong&gt;View&lt;/strong&gt; ä¸ &lt;strong&gt;Model&lt;/strong&gt; çš„è€¦åˆï¼Œç”± &lt;strong&gt;ViewModel&lt;/strong&gt; è‡ªåŠ¨å¤„ç† View ä¸ Model çš„æ•°æ®åŒæ­¥ï¼Œè§£å†³äº†æ•°æ®é¢‘ç¹æ›´æ–°ï¼ˆæ“ä½œ DOMï¼‰çš„é—®é¢˜ã€‚View é€šè¿‡ä½¿ç”¨&lt;strong&gt;æ¨¡æ¿è¯­æ³•&lt;/strong&gt;æ¥&lt;strong&gt;å£°æ˜å¼&lt;/strong&gt;çš„å°†æ•°æ®æ¸²æŸ“è¿› DOMï¼Œå½“ ViewModel å¯¹ Model è¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œä¼šé€šè¿‡æ•°æ®ç»‘å®šæ›´æ–°åˆ° Viewã€‚Model (åœ¨æœ¬æ–‡ä¸­å°±æ˜¯ &lt;code&gt;data&lt;/code&gt;) ä»…ä»…å…³æ³¨æ•°æ®å±‚æœ¬èº«ï¼Œä¸å…³å¿ƒä»»ä½•è¡Œä¸ºï¼›Model çš„æ•°æ®æ¨¡å‹ç»“åˆè§†å›¾å’Œä¸šåŠ¡å®ä½“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;del&gt;å® ç€&lt;/del&gt;ï¼Œç”»äº†ä¸ªå„æ¨¡å—çš„å…³ç³»å›¾å¸®åŠ©ç†è§£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://lg-gxg3fdgs-1254198195.cos.ap-shanghai.myqcloud.com/blog/2019-04-26-084701.png&#34; alt=&#34;image-20190426164700940&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæœ¬è½®å­ GitHub åœ°å€ï¼š&lt;a href=&#34;https://github.com/Jancat/vue-mvvm&#34;&gt;https://github.com/Jancat/vue-mvvm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Follow&lt;/strong&gt; or &lt;strong&gt;Star&lt;/strong&gt;ï¼Œä½ é€‰å“ªä¸ªï¼Ÿ&lt;/p&gt;

&lt;p&gt;ï¼ˆ&lt;del&gt;ä¸ï¼Œå°å­©å­æ‰åšé€‰æ‹©ï¼Œå¤§äººå…¨éƒ½è¦&lt;/del&gt;ï¼‰&lt;/p&gt;

&lt;h2 id=&#34;å®‰åˆ©&#34;&gt;å®‰åˆ©&lt;/h2&gt;

&lt;p&gt;å®‰åˆ©ä¸€æ³¢æœ¬æ–‡ä¸­ä½¿ç”¨åˆ°çš„å·¥å…·ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://codesandbox.io&#34;&gt;CodeSandbox&lt;/a&gt; : åŸºäº VSCode ç¼–è¾‘å™¨çš„ &lt;strong&gt;Cloud IDE&lt;/strong&gt;ï¼Œå†…ç½®å„ç§æµè¡Œæ¡†æ¶æ¨¡æ¿ã€‚é€šè¿‡ &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt; æä¾› &lt;strong&gt;embed&lt;/strong&gt; çš„é¡¹ç›®ã€ä»£ç é¢„è§ˆï¼Œæ–¹ä¾¿çš„åµŒå…¥æ–‡ç« ä¸­ï¼Œä¹ƒå±•ç¤ºæ•ˆæœã€é¡¹ç›®ä»£ç çš„è¡Œæ–‡åˆ©å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.processon.com&#34;&gt;ProcessOn&lt;/a&gt;ï¼šåœ¨çº¿ç»˜åˆ¶æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾ç­‰ï¼ŒUI ç¾è§‚ï¼Œæ•ˆæœæ‹”ç¾¤ã€‚ä¸è¿‡å…è´¹ç‰ˆæœ‰æ–‡ä»¶æ•°é‡é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;æœ¬è½®å­åŸºäºä¸‹é¢çš„ä»“åº“ä»£ç æ”¹é€ ï¼Œæ„Ÿè°¢ï¼&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/DMQ/mvvm&#34;&gt;https://github.com/DMQ/mvvm&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;å…„å¼Ÿç¯‡&lt;/strong&gt;ï¼š&lt;a href=&#34;https://jancat.github.io/post/2019/vue-mvvm-proxy/&#34;&gt;Vue MVVM å®ç°ï¼ˆProxy ç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>ä½¿ç”¨ Elementary OS</title>
      <link>https://jancat.github.io/post/2018/use-elementary-os/</link>
      <pubDate>Sun, 08 Jul 2018 18:16:57 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2018/use-elementary-os/</guid>
      
        <description>&lt;p&gt;&lt;a href=&#34;https://jancat.github.io/post/2018/win10-vmware-install-elementary-os/&#34;&gt;ä¸Šä¸€ç¯‡&lt;/a&gt; ä»‹ç»äº†åœ¨ Win10 ä¸Šå®‰è£… Elementary OSï¼Œè¿™ç¯‡ä»‹ç»ä¸‹ Elementary OS çš„ç®€å•ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/use-elementary-os/elementary-desktop.png&#34; alt=&#34;elementary-desktop&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åŒ…ç®¡ç†-apt-get&#34;&gt;åŒ…ç®¡ç† apt-get&lt;/h2&gt;

&lt;p&gt;å› ä¸º Elementary OS æ˜¯åŸºäº Ubuntu çš„ Linux å‘è¡Œç‰ˆï¼Œè€Œ Ubuntu åˆæ˜¯åŸºäº Debianï¼Œæ‰€æœ‰åŸºäº Debian çš„å‘è¡Œç‰ˆéƒ½ä½¿ç”¨ &lt;code&gt;apt-get&lt;/code&gt; è¿™ä¸ªåŒ…ç®¡ç†ç³»ç»Ÿã€‚deb åŒ…å¯ä»¥æŠŠä¸€ä¸ªåº”ç”¨çš„æ–‡ä»¶åŒ…åœ¨ä¸€èµ·ï¼Œå¤§ä½“å°±å¦‚åŒ Windows ä¸Šçš„å®‰è£…æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code&gt;apt-get&lt;/code&gt; å‘½ä»¤çš„ç¬¬ä¸€æ­¥å°±æ˜¯å¼•å…¥å¿…éœ€çš„è½¯ä»¶åº“ï¼ŒDebian çš„è½¯ä»¶åº“ä¹Ÿå°±æ˜¯ Debian è½¯ä»¶åŒ…çš„é›†åˆï¼Œå®ƒä»¬å­˜åœ¨äº’è”ç½‘ä¸Šçš„ä¸€äº›å…¬å…±ç«™ç‚¹ä¸Šã€‚æŠŠå®ƒä»¬çš„åœ°å€å¼•å…¥åï¼Œ&lt;code&gt;apt-get&lt;/code&gt; å°±èƒ½æœç´¢åˆ°æˆ‘ä»¬æƒ³è¦çš„è½¯ä»¶ã€‚&lt;code&gt;/etc/apt/sources.list&lt;/code&gt; æ˜¯å­˜æ”¾è¿™äº›åœ°å€åˆ—è¡¨çš„é…ç½®æ–‡ä»¶ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;deb &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;webæˆ–ftpåœ°å€&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;å‘è¡Œç‰ˆåå­—&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;main/contrib/non-free&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ä¿®æ”¹ &lt;code&gt;/etc/apt/sources.list&lt;/code&gt; ä¹‹åéœ€è¦æ‰§è¡Œ &lt;code&gt;sudo apt-get update&lt;/code&gt; æ¥æ›´æ–°æœ¬åœ°åŒ…åˆ—è¡¨ã€‚&lt;/p&gt;

&lt;h3 id=&#34;æ›¿æ¢ä¸º-é˜¿é‡Œäº‘æº&#34;&gt;æ›¿æ¢ä¸º é˜¿é‡Œäº‘æº&lt;/h3&gt;

&lt;p&gt;Elementary OS çš„è½¯ä»¶æºé»˜è®¤ä¸ºå›½å¤–çš„æºï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥æ›´æ¢ä¸ºå›½å†…é€Ÿåº¦è¾ƒå¿«çš„é˜¿é‡Œäº‘è½¯ä»¶æºï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åœ¨ç»ˆç«¯ä¸‹ä¿®æ”¹ &lt;code&gt;/etc/apt/sources.list&lt;/code&gt; æ–‡ä»¶çš„å¯å†™æƒé™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo chmod a+w /etc/apt/source.list&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;å¤‡ä»½ &lt;strong&gt;source.list&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo cp /etc/apt/source.list /etc/apt/source.list.bak&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨ &lt;strong&gt;Scratch&lt;/strong&gt; æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€ &lt;code&gt;/etc/apt/source.list&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ é™¤åŸæœ‰å†…å®¹ï¼Œæ›¿æ¢ä¸º &lt;strong&gt;é˜¿é‡Œäº‘æº&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ‰§è¡Œæ›´æ–°
&lt;code&gt;shell
sudo apt-get update
&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;å¸¸ç”¨è½¯ä»¶å®‰è£…&#34;&gt;å¸¸ç”¨è½¯ä»¶å®‰è£…&lt;/h2&gt;

&lt;h3 id=&#34;æœç‹—æ‹¼éŸ³è¾“å…¥æ³•&#34;&gt;æœç‹—æ‹¼éŸ³è¾“å…¥æ³•&lt;/h3&gt;

&lt;p&gt;Linux ç³»ç»Ÿè·Ÿåº”ç”¨ç¨‹åºæ‰“äº¤é“çš„æ˜¯è¾“å…¥æ³•æ¡†æ¶ï¼Œå…¶ä¸­ IBus æ˜¯ç›®å‰ä¸»æµå‘è¡Œç‰ˆçš„é»˜è®¤é…ç½®ã€‚å„ç§è¾“å…¥æ³•è¦æœ‰ç›¸å¯¹åº”çš„è¾“å…¥æ³•æ¡†æ¶æ”¯æŒï¼Œä¸­æ–‡è¾“å…¥æ³•æ˜¯åŸºäº &lt;strong&gt;fcitx&lt;/strong&gt; çš„ï¼Œè€Œç³»ç»Ÿé»˜è®¤çš„æ˜¯ iBusï¼Œæ‰€ä»¥è¦å…ˆå®‰è£… &lt;strong&gt;fcitx ä¸­æ–‡è¾“å…¥æ³•æ¡†æ¶&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å®‰è£…-fcitx&#34;&gt;å®‰è£… fcitx&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æº &lt;code&gt;software-properties-common&lt;/code&gt; å’Œ &lt;code&gt;python-software-properties&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get install software-properties-common python-software-properties&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ·»åŠ  &lt;strong&gt;ppa&lt;/strong&gt; æº
&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo add-apt-repository ppa:fcitx-team/nightly&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ›´æ–°è½¯ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get update&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… fcitx
&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get install fcitx &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å®‰è£… fcitx çš„é…ç½®å·¥å…·ã€table-all è½¯ä»¶åŒ…ã€fcitx-table-allã€im-config åˆ‡æ¢å·¥å…·&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get install fcitx-config-gtk fcitx-table-all im-config&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;ä¿®å¤è½¯ä»¶ä¾èµ–
&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get -f install&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;éªŒè¯ fcitx æ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨ &lt;strong&gt;Applications&lt;/strong&gt; ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ fcitx çš„åº”ç”¨å›¾æ ‡&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;å®‰è£…æœç‹—æ‹¼éŸ³è¾“å…¥æ³•&#34;&gt;å®‰è£…æœç‹—æ‹¼éŸ³è¾“å…¥æ³•&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;åœ¨ &lt;a href=&#34;https://pinyin.sogou.com/linux/?r=pinyin&#34;&gt;æœç‹—å®˜ç½‘&lt;/a&gt; ä¸‹è½½è¾“å…¥æ³• Linux ç‰ˆ 64ä½&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨ä¸‹è½½ç›®å½•ä¸­ä½¿ç”¨ &lt;code&gt;dpkg&lt;/code&gt; å‘½ä»¤å®‰è£… deb åŒ…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo dpkg -i sougoupinyin-xxx.deb&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ›´æ–°åŒ…ä¾èµ–
&lt;code&gt;shell
sudo apt -f install -y
&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é‡å¯ç³»ç»Ÿ&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨ç»ˆç«¯ä¸­è¾“å…¥ &lt;code&gt;im-config&lt;/code&gt;ï¼Œæ‰“å¼€ &lt;strong&gt;Input Method Configuration&lt;/strong&gt; è¾“å…¥æ³•é…ç½®ç•Œé¢&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç¡®å®šé»˜è®¤è¾“å…¥æ³•ä¸º &lt;strong&gt;æœç‹—æ‹¼éŸ³&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨æ¡Œé¢å³ä¸Šè§’ä¸­å¯ç”¨æœç‹—è¾“å…¥æ³•
&lt;img src=&#34;https://jancat.github.io/images/post/use-elementary-os/sougou-pinyin.jpg&#34; alt=&#34;sougou-pinyin&#34; /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;chrome&#34;&gt;Chrome&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get install google-chrome-stable&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;monitor&#34;&gt;Monitor&lt;/h3&gt;

&lt;p&gt;è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œåœ¨ App Center ä¸­æœç´¢ &lt;strong&gt;Monitor&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&#34;albert&#34;&gt;Albert&lt;/h3&gt;

&lt;p&gt;Alfred in Elementary os
å¿«é€Ÿæœç´¢ã€å¯åŠ¨åº”ç”¨ç¥å™¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo add-apt-repository ppa:nilarimogard/webupd8
sudo apt update
sudo apt install albert

sudo apt -f install&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;ç³»ç»Ÿè®¾ç½®&#34;&gt;ç³»ç»Ÿè®¾ç½®&lt;/h2&gt;

&lt;h4 id=&#34;dock-è®¾ç½®-ä½ç½®-å›¾æ ‡&#34;&gt;Dock è®¾ç½®ï¼ˆä½ç½®ã€å›¾æ ‡ï¼‰&lt;/h4&gt;

&lt;p&gt;ç»ˆç«¯æ‰§è¡Œ &lt;code&gt;plank --preferences&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;å¸¸è§é—®é¢˜&#34;&gt;å¸¸è§é—®é¢˜&lt;/h2&gt;

&lt;h3 id=&#34;dpkg-æ–‡ä»¶è¢«é”-å…¶å®ƒè¿›ç¨‹æ­£åœ¨å ç”¨&#34;&gt;dpkg æ–‡ä»¶è¢«é”ï¼Œå…¶å®ƒè¿›ç¨‹æ­£åœ¨å ç”¨&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;E: Could not open lock file /var/lib/dpkg/lock - open &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;: Permission denied&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
E: Unable to lock the administration directory &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/var/lib/dpkg/&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, are you root?&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³ï¼š&lt;/strong&gt; åˆ é™¤æ–‡ä»¶é”&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo rm /var/cache/apt/archives/lock
sudo rm /var/lib/dpkg/lock&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;h3 id=&#34;unable-to-locate-package&#34;&gt;Unable to locate package&lt;/h3&gt;

&lt;p&gt;æ‰§è¡Œ &lt;code&gt;sudo apt-get update&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;could-not-get-lock-æ— æ³•é”æ–‡ä»¶&#34;&gt;Could not get lock æ— æ³•é”æ–‡ä»¶&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;E: Could not get lock /var/lib/apt/lists/lock - open &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;: Resource temporarily unavailable&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
E: Unable to lock directory /var/lib/apt/lists/&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;åŸå› ï¼š&lt;/strong&gt; æ–‡ä»¶é”å†²çª
&lt;strong&gt;è§£å†³ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo rm /var/lib/apt/lists/lock
sudo apt-get update&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;h3 id=&#34;w-æ— æ³•ä¸‹è½½-http-ppa-launchpad-net-fcitx-team-nightly-ubuntu-dists-jessie-main-binary-amd64-packages&#34;&gt;W: æ— æ³•ä¸‹è½½ &lt;a href=&#34;http://ppa.launchpad.net/fcitx-team/nightly/ubuntu/dists/jessie/main/binary-amd64/Packages&#34;&gt;http://ppa.launchpad.net/fcitx-team/nightly/ubuntu/dists/jessie/main/binary-amd64/Packages&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;è§£å†³ï¼š&lt;/strong&gt; æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /etc/apt/sources.list.d
sudo mv xx.list xx.list.bak&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
      
    </item>
    
    <item>
      <title>Win10 VMware å®‰è£… Elementary OS</title>
      <link>https://jancat.github.io/post/2018/win10-vmware-install-elementary-os/</link>
      <pubDate>Sat, 21 Apr 2018 10:59:40 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2018/win10-vmware-install-elementary-os/</guid>
      
        <description>&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/elementary-os-poster.jpg&#34; alt=&#34;Elementary OS Poster&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;elementary OSæ˜¯ä¸€ä¸ªåŸºäºUbuntuçš„Linuxå‘è¡Œç‰ˆã€‚å®ƒä½¿ç”¨ä¸€ä¸ªè‡ªå·±å¼€å‘çš„åŸºäºGNOMEçš„åä¸ºPantheonçš„æ¡Œé¢ç¯å¢ƒã€‚ è¿™ä¸ªæ¡Œé¢ç¯å¢ƒå‡ºä¼—çš„åŸå› æ˜¯å®ƒæ·±åº¦é›†æˆäº†å…¶ä»–elementary OSåº”ç”¨ç¨‹åºï¼Œå¦‚Plankï¼ˆä¸€ä¸ªåŸºäºDockyçš„Dockï¼‰ã€Midoriï¼ˆé»˜è®¤çš„ç½‘é¡µæµè§ˆå™¨ï¼‰æˆ–Scratchï¼ˆä¸€ä¸ªç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ã€‚è¯¥å‘è¡Œç‰ˆä½¿ç”¨åŸºäºMutterçš„Galaä½œä¸ºå…¶çª—å£ç®¡ç†å™¨ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå‘è¡Œç‰ˆæ˜¯ä»ä¸ºUbuntuè®¾è®¡çš„ä¸€å¥—ä¸»é¢˜å’Œåº”ç”¨ç¨‹åºå‘å±•è€Œæ¥çš„ã€‚ç”±äºæ˜¯åŸºäºUbuntuçš„ï¼Œå› æ­¤ä¸Ubuntuçš„ä»“åº“å’ŒåŒ…å®Œå…¨å…¼å®¹ã€‚å®ƒä½¿ç”¨Ubuntuè‡ªå·±çš„è½¯ä»¶ä¸­å¿ƒæ¥å¤„ç†è½¯ä»¶çš„å®‰è£…å’Œå¸è½½ã€‚å…¶ç±»ä¼¼äºMac OS Xçš„ç•Œé¢è‡´åŠ›äºä½¿æ–°ç”¨æˆ·ä¸éœ€è¦è´¹å¤ªå¤§åŠ›æ°”å°±å¯ä»¥æ ¹æ®ç›´è§‰ä½¿ç”¨ã€‚
â€”â€” &lt;a href=&#34;https://zh.wikipedia.org/wiki/Elementary_OS&#34;&gt;elementary OS wiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;2018å¹´ï¼Œ&lt;strong&gt;elementary OS&lt;/strong&gt; æœ‰æ–‡ç« è¯„ä»·ä¸ºâ€œ&lt;strong&gt;æœ€ç¾çš„Linuxæ¡Œé¢å‘è¡Œç‰ˆ&lt;/strong&gt;â€ï¼Œå…¶æ¡Œé¢ç¯å¢ƒå’Œä½¿ç”¨è·Ÿ Mac OS X å¾ˆç›¸ä¼¼ï¼›å¦‚æœä½ æƒ³åœ¨ Windows ä¸‹æ‹¥æœ‰ Mac ç³»ç»Ÿçš„æ“ä½œä½“éªŒï¼Œé‚£ä¹ˆåœ¨è™šæ‹Ÿæœºä¸­å®‰è£… elementary os æ˜¯ä¸ªæœ€å¥½çš„é€‰æ‹©ï¼Œå¯ä»¥éšæ—¶åœ¨ Windows åŠå…¬å¨±ä¹ã€elementary OS å¼€å‘ç¯å¢ƒä¹‹é—´åˆ‡æ¢ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°†ä¸€æ­¥æ­¥ä»‹ç»åœ¨ Win10 VMware ä¸­å®‰è£… elementary OS çš„æ­¥éª¤ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä¸‹è½½-elementary-os-é•œåƒ&#34;&gt;ä¸‹è½½ Elementary OS é•œåƒ&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;è¿›å…¥å®˜ç½‘ &lt;a href=&#34;https://elementary.io/zh_CN/&#34;&gt;https://elementary.io/zh_CN/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è¾“å…¥é‡‘é¢ 0ï¼Œç‚¹å‡»ä¸‹è½½ iso é•œåƒ
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/download-elementary-os-iso.png&#34; alt=&#34;download-elementary-os-iso&#34; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;ä¸‹è½½å®‰è£…-vmware-workstation-pro&#34;&gt;ä¸‹è½½å®‰è£… VMware Workstation Pro&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;è¿›å…¥ VMware å®˜ç½‘ä¸‹è½½é¡µé¢ä¸‹è½½ &lt;a href=&#34;https://my.vmware.com/en/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0&#34;&gt;https://my.vmware.com/en/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…&lt;/li&gt;
&lt;li&gt;è¾“å…¥åºåˆ—å·æ¿€æ´» &lt;code&gt;CV7T2-6WY5Q-48EWP-ZXY7X-QGUWD&lt;/code&gt;ã€&lt;code&gt;FF31K-AHZD1-H8ETZ-8WWEZ-WUUVA&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;åˆ›å»º-elementary-os-è™šæ‹Ÿæœº&#34;&gt;åˆ›å»º elementary OS è™šæ‹Ÿæœº&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å¯åŠ¨ VMware&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ›å»ºæ–°çš„è™šæ‹Ÿæœºï¼Œé€‰æ‹©&lt;strong&gt;è‡ªå®šä¹‰&lt;/strong&gt;ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/new-vm.png&#34; alt=&#34;new-vm&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹©è™šæ‹Ÿæœºå…¼å®¹æ€§ï¼Œé»˜è®¤ä¸‹ä¸€æ­¥&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹©&lt;strong&gt;å®‰è£…ç¨‹åºå…‰ç›˜æ˜ åƒæ–‡ä»¶&lt;/strong&gt;ï¼Œé€‰ä¸­åˆšæ‰ä¸‹è½½çš„ Elementary OS isoé•œåƒæ–‡ä»¶ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/select-iso.png&#34; alt=&#34;select-iso&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿç‰ˆæœ¬é€‰æ‹© &lt;strong&gt;Linux&lt;/strong&gt;ã€&lt;strong&gt;å…¶ä»– Linux 4.x æˆ–æ›´é«˜ç‰ˆæœ¬å†…æ ¸ 64ä½&lt;/strong&gt;ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/select-os.png&#34; alt=&#34;select-os&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä¿®æ”¹é»˜è®¤çš„è™šæ‹Ÿæœºåç§°å’Œå­˜å‚¨ä½ç½®ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-location.png&#34; alt=&#34;vm-location&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å¤„ç†å™¨é…ç½®2æ ¸ï¼ˆå½“å‰æ“ä½œç³»ç»Ÿå†…æ ¸æ•°çš„ä¸€åŠï¼‰ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-cpu.png&#34; alt=&#34;vm-cpu&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å†…å­˜çœ‹ä¸ªäººé€‰æ‹©ï¼Œè¿™é‡Œé€‰æ‹©3Gï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-memory.png&#34; alt=&#34;vm-memory&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç½‘ç»œç±»å‹é€‰æ‹© &lt;strong&gt;æ¡¥æ¥ç½‘ç»œ&lt;/strong&gt;ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-network.png&#34; alt=&#34;vm-network&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹©I/Oæ§åˆ¶å™¨ç±»å‹ï¼Œé»˜è®¤ä¸‹ä¸€æ­¥&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹©ç¡¬ç›˜ç±»å‹ï¼Œé»˜è®¤ä¸‹ä¸€æ­¥&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜ï¼Œï¼ˆä½¿ç”¨ç‰©ç†ç£ç›˜å¯èƒ½ä¼šå½±å“åˆ°ä¸»æœºç³»ç»Ÿçš„æ­£å¸¸ä½¿ç”¨ï¼‰ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-disk.png&#34; alt=&#34;vm-disk&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æœ€å¤§ç£ç›˜å¤§å°æ ¹æ®ä¸ªäººé€‰æ‹©ï¼Œè¿™é‡Œé€‰æ‹©40Gï¼Œé€‰æ‹©&lt;strong&gt;å°†è™šæ‹Ÿç£ç›˜å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶&lt;/strong&gt;ï¼Œä¸‹ä¸€æ­¥
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-disk-size.png&#34; alt=&#34;vm-disk-size&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å®Œæˆåˆ›å»ºè™šæ‹Ÿæœº
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/vm-done.png&#34; alt=&#34;vm-done&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;å®‰è£…-elementary-os&#34;&gt;å®‰è£… elementary OS&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å¼€å¯æ­¤è™šæ‹Ÿæœº&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è¯­è¨€é€‰æ‹© &lt;strong&gt;English&lt;/strong&gt;ï¼ˆæˆ–è€…ä¸­æ–‡ç®€ä½“ï¼‰ï¼Œç‚¹å‡»&lt;strong&gt;Install Elementary&lt;/strong&gt;
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/os-language.png&#34; alt=&#34;os-language&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹© &lt;strong&gt;Install third-party software&lt;/strong&gt;ï¼Œcontinue
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/os-install-third-party-software.png&#34; alt=&#34;os-install-third-party-software&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Install Type é»˜è®¤é€‰æ‹©&lt;strong&gt;æ“¦é™¤ç£ç›˜å®‰è£…Elementary OS&lt;/strong&gt;ï¼Œç‚¹å‡»&lt;strong&gt;Install Now&lt;/strong&gt;ï¼Œ&lt;strong&gt;Continue&lt;/strong&gt;
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/os-install-type.png&#34; alt=&#34;os-install-type&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€‰æ‹©åŸå¸‚ï¼Œ&lt;strong&gt;Contiune&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é”®ç›˜å¸ƒå±€é€‰æ‹©&lt;strong&gt;Chiese&lt;/strong&gt;ï¼Œ&lt;strong&gt;Continue&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è®¾ç½®ä¸ªäººç”¨æˆ·åã€å¯†ç &lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å®‰è£…è¿‡ç¨‹ç­‰å¾…5åˆ†é’Ÿå·¦å³ï¼Œå®Œæˆåé‡å¯
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/os-done.jpg&#34; alt=&#34;os-done&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…-vmtools&#34;&gt;åœ¨è™šæ‹Ÿæœºä¸­å®‰è£… VMTools&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;é€‰æ‹© &lt;strong&gt;è™šæ‹Ÿæœº &amp;gt; å®‰è£… VMware Tools&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨è™šæ‹Ÿæœºä¸­ä¼šæŒ‚è½½ &lt;strong&gt;VMware Tools&lt;/strong&gt; CD&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è¿›å…¥æŒ‚è½½çš„ &lt;strong&gt;VMware Tools&lt;/strong&gt;ï¼Œæ‹·è´&lt;strong&gt;VMwareTools&lt;/strong&gt;æ–‡ä»¶åˆ°&lt;strong&gt;Documents&lt;/strong&gt;ç›®å½•ä¸‹ï¼ˆåœ¨CDROMä¸­æ— æ³•å†™å…¥ï¼‰&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è¿›å…¥&lt;strong&gt;Documents&lt;/strong&gt;ç›®å½•ï¼Œç”¨&lt;code&gt;tar&lt;/code&gt;å‘½ä»¤è§£å‹&lt;strong&gt;VMwareTools&lt;/strong&gt;æ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;tar zxf VMwareTools&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;è¿›å…¥è§£å‹å‡ºçš„&lt;strong&gt;VMwareTools&lt;/strong&gt;ï¼Œæ‰§è¡Œ&lt;strong&gt;vmware-install.pl&lt;/strong&gt;æ–‡ä»¶
&lt;code&gt;shell
cd VMwareTools
sudo vmware-install.pl
&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä¸€è·¯é»˜è®¤å›è½¦ï¼Œå®Œæˆå®‰è£…&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è¦åœ¨ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´æ‹–æ‹½æ–‡ä»¶å’Œå¤åˆ¶ç²˜è´´æ–‡æœ¬ï¼Œéœ€è¦æ‰§è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;/usr/bin/vmware-user&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ³¨é”€ï¼Œé‡æ–°ç™»å½•&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;è™šæ‹Ÿæœºæ— æ³•è¿æ¥ç½‘ç»œ&#34;&gt;è™šæ‹Ÿæœºæ— æ³•è¿æ¥ç½‘ç»œ&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;è™šæ‹Ÿæœº &amp;gt; è®¾ç½® &amp;gt; é€‰æ‹©æ¡¥æ¥æ¨¡å¼
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/network-bridge.png&#34; alt=&#34;network-bridge&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç¼–è¾‘ &amp;gt; è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ &amp;gt; æ¡¥æ¥æ¨¡å¼æ¡¥æ¥åˆ°ä½ çš„ç‰©ç†ç½‘å¡
&lt;center&gt;
&lt;img src=&#34;https://jancat.github.io/images/post/win10-vmware-install-elementary-os/network-edit.png&#34; alt=&#34;network-edit&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;æµ‹è¯•ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´èƒ½å¤Ÿäº’ç›¸è®¿é—®&#34;&gt;æµ‹è¯•ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´èƒ½å¤Ÿäº’ç›¸è®¿é—®&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ä¸»æœºpingè™šæ‹ŸæœºIP&lt;/li&gt;
&lt;li&gt;è™šæ‹Ÿæœºè®¿é—®ä¸»æœºå¼€å¯çš„httpæœåŠ¡ï¼ˆå¯èƒ½æ— æ³•pingé€šä¸»æœºIPï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œelementary OS åœ¨ VMware ä¸­å°±å®‰è£…å®Œæˆäº†ï¼Œåé¢è¿˜ä¼šä»‹ç» elementary OS çš„åˆå§‹åŒ–å’Œä½¿ç”¨&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>å¦‚ä½•é€‰æ‹©æŠ€æœ¯åšå®¢çš„å‘å¸ƒæ–¹å¼</title>
      <link>https://jancat.github.io/post/2018/how-to-select-the-way-to-post-teach-blog/</link>
      <pubDate>Fri, 20 Apr 2018 21:41:23 +0800</pubDate>
      
      <guid>https://jancat.github.io/post/2018/how-to-select-the-way-to-post-teach-blog/</guid>
      
        <description>&lt;p&gt;ä¹‹å‰ä¸€ç›´æœ‰è®°å½•ç¬”è®°çš„ä¹ æƒ¯ï¼Œä½†éƒ½æ˜¯ä¸å…¬å¼€åªç»™è‡ªå·±çœ‹çš„â€œç¬”è®°â€ï¼Œä¸èƒ½è§äººé‚£ç§ï¼Œæ€ä¹ˆç®€å•æ€ä¹ˆæ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¿«é€Ÿç´¢å¼•ï¼›è¿™æ ·çš„å†…å®¹è‚¯å®šç¼ºä¹æ­£å¸¸æ–‡ç« è¦æœ‰çš„å®Œæ•´æ€§ã€å¯è¯»æ€§ã€é€»è¾‘è¿è´¯æ€§ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†é”»ç‚¼è‡ªå·±çš„æ–‡å­—è¡¨è¾¾èƒ½åŠ›ï¼Œå’Œæœ¬ç€çŸ¥è¯†åˆ†äº«çš„ç²¾ç¥ï¼Œé¡ºå¸¦ç³»ç»Ÿæ•´ç†ä¸‹æ›¾ç»çš„ä¸ªäººç¬”è®°ï¼Œäºæ˜¯å¼€å§‹å†™å…¬å¼€çš„åšå®¢æ–‡ç« ï¼Œåœ¨æœç´¢å¼•æ“ä¸­ç•™ä¸‹è‡ªå·±çš„å°è®°ã€‚&lt;/p&gt;

&lt;h4 id=&#34;æ–‡ç« å‘å¸ƒç½‘ç«™çš„é€‰æ‹©&#34;&gt;æ–‡ç« å‘å¸ƒç½‘ç«™çš„é€‰æ‹©&lt;/h4&gt;

&lt;p&gt;æŠ€æœ¯æ–‡ç« å¦‚æœè¦å‘å¸ƒåœ¨å…¬å…±çš„ç½‘ç«™ä¸Šï¼Œç°åœ¨ä¸€èˆ¬æœ‰å‡ ç§é€‰æ‹©ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;æ˜é‡‘&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ˜é‡‘æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¼€å‘è€…ç¤¾åŒºï¼ŒæŠ€æœ¯æ°›å›´æµ“åšï¼Œæ–‡ç« è´¨é‡è¿˜å¯ä»¥ï¼Œå°¤å…¶å‰ç«¯ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;ç®€ä¹¦&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯”è¾ƒå—æ¬¢è¿çš„Markdownæ–‡ç« åˆ›ä½œç¤¾åŒºï¼Œå„ç§ç±»å‹çš„æ–‡ç« éƒ½æœ‰ï¼Œä½†å°±æ˜¯å› ä¸ºå¤ªæ³›äº†ï¼ŒæŠ€æœ¯æ°›å›´ä¸å¤Ÿï¼Œä¸“ä¸šæ€§ä¸å¼ºã€‚ä½†å¯¹äºæ™®é€šçš„ä¸çˆ±æŠ˜è…¾çš„ä½œè€…æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨åœ¨æ–‡ç« åˆ›ä½œä¸Šã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;segmentfault&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;segmentfault ä¸“æ ä¹Ÿæ˜¯å‘å¸ƒæŠ€æœ¯æ–‡ç« æ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œç½‘ç«™ä½“éªŒä¹Ÿå¾ˆä¸é”™ï¼Œç›¸ä¿¡ä¼šè¶Šæ¥è¶Šæµè¡Œã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;çŸ¥ä¹&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ç¨‹åºå‘˜å°éšéšäºé‡ï¼Œä¸­éšéšäºæ¥¼ï¼Œå¤§éšéšçŸ¥ä¹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¾ˆå¤šç¨‹åºå‘˜ç»å¸¸å‡ºæ²¡äºçŸ¥ä¹ï¼ŒæŠ€æœ¯æ–‡ç« ä¹Ÿå¾ˆè‡ªç„¶åœ°ä¼šå‘åœ¨ä¸Šé¢ã€‚ä½†ä¹Ÿæ˜¯è·Ÿç®€ä¹¦ä¸€æ ·çš„æƒ…å†µï¼Œå¤¹æ‚åœ¨è¿™ä¹ˆå¤šéæŠ€æœ¯æ–‡ç« /é—®ç­”ä¸­ï¼Œæ€»æ˜¯æ„Ÿè§‰ä¸å¤Ÿä¸“ä¸šï¼Œæ¯”ç®€ä¹¦æ›´ç”šã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœä¸Šé¢å‡ ç§æ–¹å¼éƒ½ä¸èƒ½æ»¡è¶³ä½ ï¼Œé‚£æˆ–è®¸ä½ æ˜¯ä¸ªæ¯”è¾ƒå–œæ¬¢æŠ˜è…¾çš„äººï¼Œæƒ³è¦ä¸ä¼—ä¸åŒï¼Œå°è¯•è‡ªå·±å»ºåšå®¢ç½‘ç«™ï¼Œå»ºç«‹ç‹¬ç‰¹çš„ä¸ªäººæ ‡è¯†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ä»é›¶å†™èµ·-or-ä½¿ç”¨é™æ€ç½‘ç«™ç”Ÿæˆå™¨&#34;&gt;ä»é›¶å†™èµ· or ä½¿ç”¨é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;è‡ªå»ºåšå®¢ç½‘ç«™ä¹Ÿæ˜¯ä¸€æ¡å¦å¦å¤§é“ï¼Œå¾ˆå¤šç¨‹åºå‘˜éƒ½å–œæ¬¢æœ‰è‡ªå·±ä¸“å±çš„ç½‘ç«™ï¼Œå£°æ˜è‡ªå·±çš„ç‹¬ç‰¹æ€§ã€‚ä¸ªäººç½‘ç«™å‡ ä¹æˆäº†Geekçš„æ ‡é…ï¼Œå¦‚æœæ²¡æœ‰åè€Œä¼šæœ‰ç‚¹å¥‡æ€ªã€‚&lt;/p&gt;

&lt;p&gt;ä¸ªäººåšå®¢è™½ç„¶ä¸æ˜¯å¤æ‚çš„ç½‘ç«™ï¼Œä½†æ˜¯è¦è‡ªå·±ä»é›¶å†™å‡ºæ¥è¾¾åˆ°èƒ½æ»¡è¶³æ­£å¸¸ä½¿ç”¨çš„ç¨‹åº¦ï¼Œè¿˜æ˜¯è¦èŠ±å¤§é‡æ—¶é—´ç²¾åŠ›åœ¨ä¸Šé¢çš„ã€‚è™½ç„¶è¿™æ ·èƒ½å‡¸æ˜¾è‡ªå·±çš„èƒ½åŠ›ï¼Œä¸ªæ€§åŒ–ç¨‹åº¦é«˜ï¼Œä½†å¦‚æœä¸æ˜¯æ‰§ç€äºâ€œ&lt;strong&gt;DIY&lt;/strong&gt;â€ï¼Œè¿™é‡Œè¿˜æ˜¯ä¸æ¨èè¿™ç§æ–¹å¼çš„ã€‚&lt;/p&gt;

&lt;p&gt;é‚£æœ€åå°±å‰©ä¸‹ &lt;strong&gt;é™æ€ç½‘ç«™ç”Ÿæˆå™¨(SSG, Static Site Generator)&lt;/strong&gt; è¿™ä¸ªé€‰æ‹©äº†ï¼Œå…³äº &lt;strong&gt;SSG&lt;/strong&gt; ï¼Œå¯ä»¥é˜…è¯»è¿™ä¸ªåšå®¢çš„å‰åŠéƒ¨åˆ† &lt;a href=&#34;https://www.jianshu.com/p/c50dab7a98ef&#34;&gt;åˆ©ç”¨é™æ€ç½‘ç«™ç”Ÿæˆå™¨åˆ¶ä½œé™æ€åšå®¢ç½‘ç«™&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;SSG&lt;/strong&gt; å°±æ˜¯å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆé™æ€ç½‘ç«™çš„å·¥å…·ï¼Œå¾ˆå¤šå¼€æºçš„ç½‘ç«™ä¸»é¢˜å¯ä»¥é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åˆ¶ä½œä¸»é¢˜è‡ªç”¨å’Œå…±äº«ã€‚ä¸€èˆ¬åªè¦æ”¹ä¸‹é…ç½®æ–‡ä»¶å’Œåˆ›å»ºmarkdownæ–‡ç« å°±èƒ½éƒ¨ç½²äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;é™æ€ç½‘ç«™ç”Ÿæˆå™¨çš„é€‰æ‹©&#34;&gt;é™æ€ç½‘ç«™ç”Ÿæˆå™¨çš„é€‰æ‹©&lt;/h4&gt;

&lt;p&gt;é™æ€ç½‘ç«™ç”Ÿæˆå™¨ ç°åœ¨æœ‰ä¸Šç™¾ä¸ªï¼ŒåŸç†å’Œä½¿ç”¨æ–¹å¼éƒ½å¤§åŒå°å¼‚ï¼Œä½†åœ¨ä¸äº†è§£çš„æƒ…å†µä¸‹é€‰æ‹©å‡ºæœ€åˆé€‚è‡ªå·±çš„è¿˜æ˜¯æ¯”è¾ƒçº ç»“çš„ã€‚å¹¸å¥½æœ‰ä¸ªä¸“é—¨ç»Ÿè®¡ &lt;strong&gt;SSG&lt;/strong&gt; çš„ç½‘ç«™ &lt;a href=&#34;https://www.staticgen.com/&#34;&gt;Staitc Gen&lt;/a&gt;ï¼Œé‡Œé¢å±•ç¤ºäº†å‡ ä¹æ‰€æœ‰å¼€æºçš„ &lt;strong&gt;SSG&lt;/strong&gt;ï¼Œæ ¹æ®Github Projectçš„æ•°æ®ï¼ˆé»˜è®¤æ˜¯Starsæ•°ï¼‰æ¥è¿›è¡Œæ’åˆ—ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå°±ä»ä¸»è¦çš„ä¸‰ä¸ª &lt;strong&gt;SSG&lt;/strong&gt; æ¥é€‰æ‹©ï¼š&lt;strong&gt;Jekyll&lt;/strong&gt;ã€&lt;strong&gt;Hugo&lt;/strong&gt;ã€&lt;strong&gt;Hexo&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&#34;jekyll&#34;&gt;Jekyll&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt; æ˜¯æ¯”è¾ƒæ—©æœŸçš„é¡¹ç›®äº†ï¼Œä»2008å¹´å¼€å§‹ï¼Œç›®å‰Github Starsæ•°é‡æ’è¡Œç¬¬ä¸€ï¼›ä½¿ç”¨ &lt;strong&gt;Ruby&lt;/strong&gt; è¯­è¨€å®ç°ï¼Œæ˜¯ &lt;strong&gt;Github Pages&lt;/strong&gt; æ¨èçš„ SSGã€‚&lt;/p&gt;

&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼˜å…ˆé€‰æ‹©æœ€æµè¡Œçš„æ˜¯æ²¡é”™çš„ï¼Œæ‰€ä»¥é¦–å…ˆæ‹¿ &lt;code&gt;Jekyll&lt;/code&gt; åœ¨ &lt;strong&gt;Win10&lt;/strong&gt; ä¸Šè¯•è¯•æ°´ã€‚&lt;/p&gt;

&lt;p&gt;æŒ‰ç…§å®˜ç½‘çš„å®‰è£…æ­¥éª¤èµ°ï¼Œåœ¨ &lt;code&gt;Win10&lt;/code&gt; ä¸Šå‡†å¤‡ç¯å¢ƒè¿˜æ˜¯æ¯”è¾ƒ&lt;strong&gt;è‰°éš¾&lt;/strong&gt;çš„ï¼Œå…‰ &lt;strong&gt;Ruby&lt;/strong&gt; ç¯å¢ƒçš„å®‰è£…éƒ½å¾ˆ&lt;strong&gt;æŠ˜è…¾&lt;/strong&gt;ï¼Œå³ä½¿æŒ‰ç…§å®˜ç½‘æ¨èçš„æ–¹å¼ä½¿ç”¨&lt;strong&gt;WSL&lt;/strong&gt;(Window Subsystem Linux)ï¼Œ&lt;strong&gt;åœ¨Win10ä¸Šå®‰è£…Ubuntu&lt;/strong&gt; ç»ˆç«¯ç¯å¢ƒï¼Œæœ€åè¿˜æ˜¯å‡ºç°å¾ˆå¤šé—®é¢˜æ²¡è§£å†³ï¼Œè¿˜æ²¡èµ°åˆ° &lt;strong&gt;Jekyll&lt;/strong&gt; é‚£ä¸€æ­¥å°±è¢«å‘åœ¨æ´é‡Œçˆ¬ä¸å‡ºæ¥ï¼Œé‚æ”¾å¼ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸å»ºè®®åœ¨Win10ç³»ç»Ÿä¸Šå®‰è£…Jekyll&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨&lt;strong&gt;Mac&lt;/strong&gt;ä¸Šå®‰è£…åº”è¯¥æ¯”è¾ƒå®¹æ˜“ï¼Œä½†è¿™é‡Œåªè®¨è®º&lt;strong&gt;Windows&lt;/strong&gt;ç³»ç»Ÿç¯å¢ƒï¼ŒMacå…šå¯ä»¥å°è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;hexo&#34;&gt;Hexo&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://hexo.io/&#34;&gt;Hexo&lt;/a&gt; æ˜¯2012å¹´çš„é¡¹ç›®ï¼Œå‘å±•åˆ°ç°åœ¨ï¼Œä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨çš„æ¯”è¾ƒå¤šçš„SSGã€‚Github Starsæ•°é‡æ’ç¬¬å››ï¼Œä½¿ç”¨ &lt;strong&gt;Node.js&lt;/strong&gt; å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æ˜¯åé¢æ–°å´›èµ·çš„ &lt;strong&gt;Hugo&lt;/strong&gt;ï¼Œæˆ–è®¸å°±è¢«æˆ‘é€‰ä¸­äº†ï¼Œå¯æƒœæ²¡æœ‰å¦‚æœã€‚&lt;/p&gt;

&lt;h4 id=&#34;hugo&#34;&gt;Hugo&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡å‹è½´ç»ˆäºå‡ºåœºäº†ğŸ‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&#34;http://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; ä½¿ç”¨ &lt;strong&gt;Go&lt;/strong&gt; è¯­è¨€å®ç°ï¼Œç›®å‰Github Starsæ•°é‡æ’ç¬¬äºŒï¼Œä»…æ¬¡äºè€ç‰Œ Jekyllã€‚å´›èµ·äº2017å¹´ï¼Œåœ¨2018å¹´ä½œä¸ºæ–°å…´SSGè¿…é€Ÿæµè¡Œèµ·æ¥ï¼Œæœ¬ç«™ä¹Ÿæ˜¯ä½¿ç”¨ Hugo å»ºç«™ã€‚å®˜ç½‘ä¸Šå·ç§°â€œ&lt;strong&gt;ä¸–ç•Œä¸Šå»ºç«™æœ€å¿«çš„æ¡†æ¶&lt;/strong&gt;â€ï¼ˆå®˜ç½‘ä½ çš®è¿™ä¸€ä¸‹å¼€å¿ƒå—ï¼Ÿï¼‰&lt;/p&gt;

&lt;p&gt;hugo.io åŸŸåè¢«æŠ¢æ³¨äº†ï¼Œå®˜ç½‘ç”¨ gohugo.io è™½æ˜¯æ— å¥ˆä¹‹ä¸¾ï¼Œä½†ä¹ŸæŒºæœºæ™ºã€‚&lt;/p&gt;

&lt;p&gt;Win10 è½»æ¾å®‰è£… Hugo â¡ &lt;code&gt;choco install hugo&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Hugo æ¨¡æ¿è¯­æ³•ä¸å¤ªé€‚åº”ï¼Œå¦‚æœéœ€è¦è‡ªå·±åˆ›å»ºä¸»é¢˜æˆ–è€…è‡ªå®šä¹‰å·²æœ‰çš„ä¸»é¢˜ï¼Œè¿˜æ˜¯å…ˆè¦åœ¨å®˜ç½‘äº†è§£ä¸€å †æ¦‚å¿µçš„ã€‚&lt;/p&gt;

&lt;p&gt;å¸Œæœ›æœ‰ä¸€å¤©èƒ½å¤Ÿå‡ºè‡ªå·±çš„ä¸»é¢˜ğŸ™ƒ&lt;/p&gt;

&lt;h4 id=&#34;æœ€å&#34;&gt;æœ€å&lt;/h4&gt;

&lt;p&gt;ä»¥ä¸Šåªæ˜¯æˆ‘ä¸ªäººçš„ç»éªŒè§è§£ï¼Œä»…ä¾›å‚è€ƒï¼Œæ€æ ·é€‰æ‹©è¿˜æ˜¯è¦é &lt;strong&gt;çœ¼ç¼˜&lt;/strong&gt;å’Œ&lt;strong&gt;çœ¼åŠ›&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ï¼ˆå¦‚æœè¿˜æ˜¯çº ç»“ï¼Œé‚£å°± &lt;strong&gt;Hugo&lt;/strong&gt; å§ï¼‰&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>å…³äº</title>
      <link>https://jancat.github.io/about/</link>
      <pubDate>Fri, 20 Apr 2018 09:10:24 +0000</pubDate>
      
      <guid>https://jancat.github.io/about/</guid>
      
        <description>&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/about/about-background.jpg&#34; alt=&#34;background&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¸¸èµ°äºæ–‡è‰ºè¾¹ç¼˜ï¼Œå¿ƒä¸­å¸¸ä½ç€æŒå‰‘çš„å°‘å¹´&lt;/p&gt;

&lt;p&gt;å‘å¾€äºŒæ¬¡å…ƒï¼Œæ­£å› æ— æ³•ä¼åŠ&lt;/p&gt;

&lt;p&gt;å–œæ¬¢Codingå¸¦æ¥çš„æˆå°±æ„Ÿ&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ä½¿ç”¨Nodeå’ŒTypescriptçˆ¬å–èŠ±ç“£ç½‘å›¾ç‰‡</title>
      <link>https://jancat.github.io/post/2018/huaban-crawler-with-node-and-typescript/</link>
      <pubDate>Thu, 19 Apr 2018 04:03:44 +0000</pubDate>
      
      <guid>https://jancat.github.io/post/2018/huaban-crawler-with-node-and-typescript/</guid>
      
        <description>&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/huaban-crawler-with-node-and-typescript/huban-logo.jpg&#34; alt=&#34;huban-logo&#34; /&gt;&lt;/p&gt;

&lt;!-- @import &#34;[TOC]&#34; {cmd=&#34;toc&#34; depthFrom=1 depthTo=6 orderedList=false} --&gt;

&lt;!-- code_chunk_output --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#å‰è¨€&#34;&gt;å‰è¨€&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#æŠ€æœ¯é€‰å‹&#34;&gt;æŠ€æœ¯é€‰å‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#èŠ±ç“£ç½‘æŠ€æœ¯åˆ†æ&#34;&gt;èŠ±ç“£ç½‘æŠ€æœ¯åˆ†æ&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#ç”»æ¿èµ„æº&#34;&gt;ç”»æ¿èµ„æº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#board-data&#34;&gt;Board Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#å›¾ç‰‡æ‡’åŠ è½½&#34;&gt;å›¾ç‰‡æ‡’åŠ è½½&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#node-çˆ¬è™«å®ç°&#34;&gt;Node çˆ¬è™«å®ç°&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#è¾“å…¥ç”»æ¿idä¸‹è½½è¯¥ç”»æ¿çš„æ‰€æœ‰å›¾ç‰‡&#34;&gt;è¾“å…¥ç”»æ¿IDä¸‹è½½è¯¥ç”»æ¿çš„æ‰€æœ‰å›¾ç‰‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#è¾“å…¥ç”¨æˆ·idä¸‹è½½è¯¥ç”¨æˆ·æ‰€æœ‰è‡ªå»ºç”»æ¿çš„å›¾ç‰‡ä¸åŒ…æ‹¬æ”¶è—çš„ç”»æ¿&#34;&gt;è¾“å…¥ç”¨æˆ·IDä¸‹è½½è¯¥ç”¨æˆ·æ‰€æœ‰è‡ªå»ºç”»æ¿çš„å›¾ç‰‡ï¼ˆä¸åŒ…æ‹¬æ”¶è—çš„ç”»æ¿ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#æ€»ç»“&#34;&gt;æ€»ç»“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#github-project&#34;&gt;Github Project&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- /code_chunk_output --&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://huaban.com&#34;&gt;èŠ±ç“£ç½‘&lt;/a&gt; æœ€åˆæ˜¯æ¨¡ä»¿å›½å¤–çš„ &lt;a href=&#34;https://www.pinterest.com/&#34;&gt;Pinterest&lt;/a&gt; å¼€å§‹åšèµ·æ¥çš„å›¾ç‰‡é‡‡é›†åˆ†äº«ç½‘ç«™ï¼Œå›½å†…ç±»ä¼¼çš„ç½‘ç«™æœ‰&lt;a href=&#34;https://www.duitang.com/&#34;&gt;å †ç³–&lt;/a&gt;ã€‚åœ¨åˆæœŸçš„ç”¨æˆ·ç§¯ç´¯é˜¶æ®µè¿‡åï¼ŒèŠ±ç“£ç½‘è¿‘å‡ å¹´å¼€å§‹æ¢ç´¢å…¶å•†ä¸šæ¨¡å¼ï¼Œä»¥â€œå›¾â€ä¸ºä¸­å¿ƒå‘ç›¸å…³é¢†åŸŸå»¶ä¼¸ï¼ˆæ‘„å½±ã€è®¾è®¡ã€Liveã€ç”µå•†å¯¼è´­ç­‰ï¼‰ï¼Œä¸è¿‡ä¸ç®¡æ€ä¹ˆå‘å±•ï¼Œç”¨æˆ·ä½“éªŒè¿˜æ˜¯è¦æ”¾åœ¨é¦–ä½çš„ï¼Œä¸å¿˜åˆè¡·ã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºå›½å†…ä¼˜ç§€çš„å›¾ç‰‡ç½‘ç«™,å…¶æµç•…çš„ç€‘å¸ƒæµå›¾ç‰‡å±•ç¤ºã€ç®€å•æ˜“ç”¨çš„å›¾ç‰‡é‡‡é›†åˆ†ç±»æ–¹å¼ã€å¼ºå¤§çš„å›¾ç‰‡é‡‡é›†æ’ä»¶ï¼Œè®©æˆ‘è¿™ä¸ªå›¾æ§åšæŒåœ¨è¿™é‡Œæ·±è€•å¤šå¹´ï¼Œé‡‡é›†äº†å‡ ä¸‡å¼ å›¾ç‰‡ï¼Œéª—ç²‰å‡ åƒä¸ªï¼ˆæ¬¢è¿å…³æ³¨ &lt;a href=&#34;http://huaban.com/junlin/&#34;&gt;http://huaban.com/junlin/&lt;/a&gt; ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶è€Œå¯¹äº&lt;strong&gt;å›¾æ§+æ”¶è—æ§&lt;/strong&gt;æ¥è¯´ï¼ŒèŠ±ç“£ç½‘ä¹Ÿåªæ˜¯&lt;strong&gt;ä¸ªäººå›¾åº“å¤§è®¡&lt;/strong&gt;ä¸­çš„å…¶ä¸­ä¸€ç¯ï¼Œæ¯•ç«Ÿè¿˜æ˜¯æœ‰å¾ˆå¤š&lt;del&gt;ç§å›¾&lt;/del&gt;ä¸å®œå…‰æ˜æ­£å¤§æ”¾å‡ºæ¥çš„ï¼ŒèŠ±ç“£ç½‘ä¹Ÿæœ‰è¿è§„å›¾ç‰‡æ£€æµ‹æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦æ±‡æ€»èŠ±ç“£ç½‘é‡‡é›†çš„å›¾ç‰‡åˆ°ä¸ªäººå­˜å‚¨åº“ä¸­ï¼ˆç½‘ç›˜orç¡¬ç›˜ï¼‰ï¼›æ­¤ä¸º&lt;u&gt;çº¯çº¯çš„&lt;/u&gt;åŠ¨æœºï¼Œä¹Ÿæ˜¯æœ¬æ–‡å‡ºç°çš„åŸå› ã€‚&lt;/p&gt;

&lt;h3 id=&#34;æŠ€æœ¯é€‰å‹&#34;&gt;æŠ€æœ¯é€‰å‹&lt;/h3&gt;

&lt;p&gt;è¿™ä¹ˆå¤šå›¾ç‰‡æ‰‹å·¥ä¸€ä¸ªä¸ªä¸‹è½½è‚¯å®šæ˜¯ä¸ç°å®çš„ï¼ŒèŠ±ç“£ç½‘ä¹Ÿæ²¡æœ‰æä¾›æ‰¹é‡ä¸‹è½½ç”»æ¿çš„åŠŸèƒ½ï¼ˆè¦æ˜¯æœ‰å°±çœå¿ƒäº†ï¼Œå¯èƒ½æ˜¯è€ƒè™‘åˆ°è¿™åŠŸèƒ½å¼€æ”¾åä¼šå½±å“ç½‘ç«™è¿è¥ï¼‰ï¼Œè¿™æ ·å°±å‚¬ç”Ÿäº†å¾ˆå¤šæ‰¹é‡ä¸‹è½½å·¥å…·ã€è„šæœ¬ï¼ˆ&lt;a href=&#34;https://www.douban.com/group/473118/&#34;&gt;è±†çš®DouPç›¸å†Œä¸‹è½½å™¨è±†ç“£å°ç»„&lt;/a&gt;ã€Github çˆ¬è™«é¡¹ç›®ï¼‰ï¼ŒåŸºæœ¬éƒ½èƒ½å¾ˆæ–¹ä¾¿çš„ä¸‹è½½ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç€ä¸€é¢—ä¸å®‰åˆ†å–œæ¬¢æŠ˜è…¾çš„å¿ƒï¼Œä¹Ÿæ˜¯å‡ºäºæŠ€æœ¯å­¦ä¹ ç›®çš„ï¼Œæ‰“ç®—è‡ªå·±å®ç°ä¸€ä¸ªæ‰¹é‡ä¸‹è½½çš„çˆ¬è™«è„šæœ¬ã€‚è™½ç„¶çˆ¬è™«é¦–é€‰Pythonï¼Œä½†ï¼Œä½œä¸ºç›¸ä¿¡ç€ &lt;strong&gt;Atwoodå®šå¾‹&lt;/strong&gt; çš„å‰ç«¯erï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;any application that can be written in JavaScript, will eventually be written in JavaScript.
ï¼ˆä»»ä½•èƒ½å¤Ÿç”¨JavaScriptå®ç°çš„åº”ç”¨ï¼Œæœ€ç»ˆéƒ½å¿…å°†ç”±JavaScriptå®ç°ã€‚ï¼‰
&amp;ndash; Jeff Atwood&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¾ˆè‡ªç„¶çš„é€‰æ‹©äº† &lt;strong&gt;Node.js&lt;/strong&gt; ï¼Œå†åŠ ä¸Šè¶Šæ¥è¶Šæ¥æµè¡Œçš„ &lt;strong&gt;TypeScript&lt;/strong&gt;ï¼Œå¦‚è™æ·»ç¿¼ï¼ŒPerfectï¼&lt;/p&gt;

&lt;h2 id=&#34;èŠ±ç“£ç½‘æŠ€æœ¯åˆ†æ&#34;&gt;èŠ±ç“£ç½‘æŠ€æœ¯åˆ†æ&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæ‰“å¼€èŠ±ç“£ç½‘ä»»æ„ä¸€ä¸ª&lt;strong&gt;ç”»æ¿&lt;/strong&gt;ï¼Œåœ¨ Chrome DevTools - Network ä¸‹è§‚å¯Ÿå®ƒå’ŒæœåŠ¡å™¨ä¹‹å‰çš„äº¤äº’ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç”»æ¿èµ„æº&#34;&gt;ç”»æ¿èµ„æº&lt;/h3&gt;

&lt;p&gt;åˆ·æ–°åå‘ç°æœ‰å¾ˆå¤šç½‘ç»œè¯·æ±‚ï¼Œæ³¨æ„åˆ°æœ€å¼€å§‹æœ‰ä¸ªå¸¦æœ‰&lt;strong&gt;ç”»æ¿ID&lt;/strong&gt;çš„ Request &lt;a href=&#34;http://huaban.com/boards/17473820/&#34;&gt;http://huaban.com/boards/17473820/&lt;/a&gt; ï¼Œåº”è¯¥å°±æ˜¯å®ƒäº†ï¼ŒæœåŠ¡å™¨å“åº”çš„æ˜¯ä¸€ä¸ª HTML Documentã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/huaban-crawler-with-node-and-typescript/board-request.png&#34; alt=&#34;board-request&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;board-data&#34;&gt;Board Data&lt;/h3&gt;

&lt;p&gt;åœ¨è¿™ä¸ª HTML Document ä¸­å‘ç°æœ‰ä¸ª &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; ä¸­å¸¦æœ‰å¤§é‡çš„ &lt;strong&gt;board&lt;/strong&gt; æ•°æ®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;board&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;board_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;17473820&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;user_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;14191742&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;â—ˆ äºŒæ¬¡å…ƒ å°‘å¥³ â—ˆ&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;description&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ä¸‰æ¬¡å…ƒä¹‹å¤–çš„ä¸€ç‰‡å‡€åœŸï¼Œæ»¡æ»¡çš„æ²»æ„ˆ~&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;category_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;anime&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;pin_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12627&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;follow_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1004&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;like_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;37&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;created_at&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1410342416&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;updated_at&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1523766920&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;deleting&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;is_private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;extra&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cover&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pin_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;407033830&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;category_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;åŠ¨æ¼«&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;following&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;liked&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;pins&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;pin_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1595477246&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;user_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;14191742&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;board_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;17473820&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;file_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;183940093&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;183940093&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;farm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;farm1&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;bucket&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;hbimg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;95b6f7594128756a5fb415188cb5761c4139cebbf359b-R9Dvyn&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;image/jpeg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;752&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1062&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;frames&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;colors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5934&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ratio&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.09&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}],&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;theme&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;00172e&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;media_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;pixiv.net&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;link&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://www.pixiv.net/member_illust.php?mode=medium&amp;amp;illust_id=67752097&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;raw_text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;å¥ã•ã‚“&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;text_meta&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;via&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1587727234&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;via_user_id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8451317&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;original&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1568136527&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;created_at&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1523444564&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;like_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;comment_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;repin_count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;is_private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;extra&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;orig_source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­ &lt;code&gt;app.page.board.pins&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œé‡Œé¢æ¯ä¸ªå¯¹è±¡å¯¹åº”ç€ç”»æ¿ä¸­å…¶ä¸­ä¸€å¼ å›¾ç‰‡çš„ä¿¡æ¯ï¼Œ&lt;code&gt;pin&lt;/code&gt; ä»£è¡¨ä¸€å¼ å›¾ç‰‡çš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ç½‘é¡µä¸­æ£€æŸ¥ç¬¬ä¸€å¼ å›¾ç‰‡çš„æº &lt;code&gt;&amp;lt;img src=&amp;quot;//img.hb.aicdn.com/95b6f7594128756a5fb415188cb5761c4139cebbf359b-R9Dvyn_fw236&amp;quot;&amp;gt;&lt;/code&gt;ï¼Œå¯ä»¥å‘ç°èŠ±ç“£ç½‘å›¾ç‰‡ä½¿ç”¨äº†åˆæ‹äº‘çš„CDNæœåŠ¡ï¼Œç¬¬äºŒéƒ¨åˆ†å³æ˜¯ä¸Šé¢çš„ &lt;code&gt;pins[0].file.key&lt;/code&gt; åŠ ä¸Šä¸€ä¸ª &lt;code&gt;_fw236&lt;/code&gt; åç¼€ï¼›å…¶å®ƒå›¾ç‰‡çš„ &lt;code&gt;src&lt;/code&gt; éƒ½å¸¦æœ‰è¿™ä¸ª &lt;code&gt;_fw236&lt;/code&gt; åç¼€ï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“å®ƒçš„æ„ä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‹¿åˆ°äº†ç”»æ¿å›¾ç‰‡ä¿¡æ¯ï¼Œåˆ°è¿™ä¸€æ­¥å°±èƒ½æƒ³åˆ°å¯ä»¥é€šè¿‡çˆ¬è™«æ¥ä¸‹è½½ç”»æ¿çš„å›¾ç‰‡ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å›¾ç‰‡æ‡’åŠ è½½&#34;&gt;å›¾ç‰‡æ‡’åŠ è½½&lt;/h3&gt;

&lt;p&gt;å†å›åˆ°ç”»æ¿ç½‘é¡µä¸Šï¼Œçœ‹åˆ°é¡µé¢ä¸Šç›®å‰åªåŠ è½½äº†ç”»æ¿ä¸€éƒ¨åˆ†å›¾ç‰‡ï¼Œå‰©ä¸‹çš„å›¾ç‰‡æ˜¯é€šè¿‡&lt;strong&gt;æ‡’åŠ è½½&lt;/strong&gt;çš„æ–¹å¼å‡ºç°çš„ï¼ˆæƒ³æƒ³å°±çŸ¥é“ä¸èƒ½ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰å›¾ç‰‡éƒ½åŠ è½½å‡ºæ¥ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‹–åŠ¨æ»šåŠ¨æ¡åˆ°åº•éƒ¨ï¼Œç»§ç»­è§‚å¯Ÿ &lt;strong&gt;Network&lt;/strong&gt;ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚ &lt;a href=&#34;http://huaban.com/boards/17473820/?jg6ltavl&amp;amp;max=1584529804&amp;amp;limit=20&amp;amp;wfl=1&#34;&gt;http://huaban.com/boards/17473820/?jg6ltavl&amp;amp;max=1584529804&amp;amp;limit=20&amp;amp;wfl=1&lt;/a&gt; åœ¨ç”»æ¿IDåé¢æºå¸¦äº†ä¸€äº›å‚æ•°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://jancat.github.io/images/post/huaban-crawler-with-node-and-typescript/board-lazy-load.png&#34; alt=&#34;board-lazy-load&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;nx&#34;&gt;jg6ltavl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; 
&lt;span class=&#34;nx&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1584529804&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;wfl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œæœ€åä¸€ä½æŒ‰å­—æ¯è¡¨é¡ºåºå¾ªç¯ï¼Œæ²¡å‘ç°æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå¿½ç•¥ï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªå‚æ•° &lt;strong&gt;max&lt;/strong&gt; çš„å€¼æ˜¯ä¸ª &lt;strong&gt;pin_id&lt;/strong&gt; ï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ä¸ªå‚æ•° &lt;strong&gt;limit&lt;/strong&gt; é™åˆ¶äº†æœåŠ¡å™¨è¿”å›çš„ &lt;strong&gt;pin æ•°é‡&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬å››ä¸ªå‚æ•° &lt;strong&gt;wfl&lt;/strong&gt; å¯èƒ½æ˜¯ &lt;strong&gt;waterfall&lt;/strong&gt; ç€‘å¸ƒæµçš„ç¼©å†™ï¼Œæ²¡å‘ç°æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå¿½ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é‡ç‚¹æ˜¯ &lt;strong&gt;max&lt;/strong&gt; å’Œ &lt;strong&gt;limit&lt;/strong&gt; è¿™ä¸¤ä¸ªå€¼ï¼Œç»è¿‡æµ‹è¯•å‘ç°ï¼Œ&lt;strong&gt;max&lt;/strong&gt; æ˜¯ä¸Šä¸€å¼ å›¾ç‰‡çš„ &lt;strong&gt;pin_id&lt;/strong&gt;ï¼ŒæœåŠ¡å™¨æŒ‰å…ˆåé¡ºåºï¼ˆé‡‡é›†é¡ºåºï¼‰è¿”å›è¿™å¼ å›¾ç‰‡&lt;strong&gt;åé¢&lt;/strong&gt;çš„ pin æ•°æ®ï¼›&lt;/p&gt;

&lt;p&gt;è€Œ &lt;strong&gt;limit&lt;/strong&gt; å‘Šè¯‰æœåŠ¡å™¨è¿”å›&lt;strong&gt;å¤šå°‘ä¸ª&lt;/strong&gt; pin æ•°æ®ã€‚åé¢æµ‹å‡ºæœåŠ¡å™¨å¯¹ &lt;strong&gt;limit&lt;/strong&gt; åšäº†æœ€å¤§å€¼æ ¡éªŒï¼Œæœ€å¤§æ˜¯ &lt;strong&gt;100&lt;/strong&gt;ï¼Œå³ä¸€æ¬¡æœ€å¤šåªèƒ½åŠ è½½100å¼ å›¾ç‰‡æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°äº†ç°åœ¨å¯ä»¥å¼€å§‹å†™çˆ¬è™«æ¨¡æ‹Ÿä¸Šé¢çš„æ“ä½œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;node-çˆ¬è™«å®ç°&#34;&gt;Node çˆ¬è™«å®ç°&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨ Node.js å®ç°å‘½ä»¤è¡Œç¨‹åºï¼Œæä¾›ä¸¤ç§æ–¹å¼ä¸‹è½½å›¾ç‰‡ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è¾“å…¥&lt;strong&gt;ç”»æ¿ID&lt;/strong&gt;ä¸‹è½½è¯¥ç”»æ¿çš„æ‰€æœ‰å›¾ç‰‡&lt;/li&gt;
&lt;li&gt;è¾“å…¥&lt;strong&gt;ç”¨æˆ·ID&lt;/strong&gt;ä¸‹è½½è¯¥ç”¨æˆ·æ‰€æœ‰è‡ªå»ºç”»æ¿çš„å›¾ç‰‡ï¼ˆä¸åŒ…æ‹¬æ”¶è—çš„ç”»æ¿ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;è¾“å…¥ç”»æ¿idä¸‹è½½è¯¥ç”»æ¿çš„æ‰€æœ‰å›¾ç‰‡&#34;&gt;è¾“å…¥ç”»æ¿IDä¸‹è½½è¯¥ç”»æ¿çš„æ‰€æœ‰å›¾ç‰‡&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åœ¨å‘½ä»¤è¡Œä¸­è·Ÿç”¨æˆ·äº¤äº’ï¼Œä½¿ç”¨ Node &lt;code&gt;readline&lt;/code&gt; APIå®ç°åœ¨ &lt;code&gt;stdin/stdout&lt;/code&gt; è¯»å–è¾“å…¥å’Œæ˜¾ç¤ºè¾“å‡ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;kr&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readline&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;readline&amp;#39;&lt;/span&gt;

&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rl&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;readline.ReadLine&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createInterface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;input&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;process.stdin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;process.stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;rl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ç”»æ¿IDï¼š&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;boardId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆæ ¹æ®ç”»æ¿IDè·å– &lt;code&gt;board&lt;/code&gt; æ•°æ®ï¼Œç„¶åè·å–åˆ° &lt;code&gt;board&lt;/code&gt; ä¸­æ‰€æœ‰çš„ &lt;code&gt;pins&lt;/code&gt; æ•°æ®ï¼Œæœ€åæ ¹æ®æ¯ä¸ª &lt;code&gt;pin&lt;/code&gt; æ•°æ®ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ç›®å½•ä¸­ï¼Œä¸­é—´å‘å‘½ä»¤è¡Œä¸­è¾“å‡ºä¸€äº›æç¤ºï¼š
```ts
async function downloadSingleBoard(boardId: string): Promise&lt;void&gt; {
console.time(&amp;lsquo;Total time&amp;rsquo;)
const board = await getBoardInfo(boardId)
console.log(&amp;rsquo;\nå¼€å§‹ä¸‹è½½ç”»æ¿ %s - %sï¼Œå›¾ç‰‡æ•°é‡ï¼š%d&amp;rsquo;, boardId, board.title, board.pin_count)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;await getPinsAndDownload(board)
  outputResult()
}
```&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ ¹æ®ç”»æ¿IDè·å– &lt;code&gt;board&lt;/code&gt; æ•°æ®ã€‚ä¸ºäº†ä½¿ç”¨ ES7 çš„ &lt;code&gt;async/await&lt;/code&gt;ï¼Œå¼•å…¥äº† &lt;code&gt;promisify&lt;/code&gt; çš„ request åº“&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span class=&#34;kr&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rp&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;request-promise&amp;#39;&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getBoardInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boardId&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Promise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IBoard&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;err?&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;number&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;IBoard&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;huabanDomain&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/boards/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boardId&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;jsonRequestHeader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ç”»æ¿ä¸å­˜åœ¨ï¼&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;è·å– &lt;code&gt;pins&lt;/code&gt; æ•°æ®ç„¶åä¸‹è½½å›¾ç‰‡ï¼Œè¾“å‡ºç»“æœã€‚å…¶ä¸­åœ¨è·å– &lt;code&gt;pins&lt;/code&gt; æ•°æ®çš„æ—¶å€™å‘ç°æœ‰äº›ç”»æ¿æ— æ³•è·å–å…¨éƒ¨çš„ &lt;code&gt;pins&lt;/code&gt; æ•°æ®ï¼Œé€ æˆç”»æ¿å›¾ç‰‡ä¸‹è½½ä¸å…¨ï¼ˆæš‚æ—¶è¿˜ä¸æ¸…æ¥šåŸå› ï¼‰
```ts
async function getPinsAndDownload(board: IBoard): Promise&lt;void&gt; {
const boardPins = await getPins(board.board_id)
// TODO: æœ‰äº›ç”»æ¿è·å–çš„pinsæ•°æ®ä¸å…¨ï¼Ÿ
const missedPinsCount = board.pin_count - boardPins.length&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;const boardPath = &lt;code&gt;${downloadPath}/${board.board_id} - ${board.title}&lt;/code&gt;
  fs.emptyDirSync(boardPath)&lt;/p&gt;

&lt;p&gt;const downloadCount: number = await downloadImage(boardPins, boardPath)
  const failedCount: number = board.pin_count - downloadCount - missedPinsCount
  totalDownload += downloadCount&lt;/p&gt;

&lt;p&gt;console.log(
    &lt;code&gt;Done. æˆåŠŸ %d ä¸ª${failedCount ?&lt;/code&gt;ï¼Œå¤±è´¥ \x1b[31m${failedCount}\x1b[0mä¸ª&lt;code&gt;: &#39;&#39;}${
      missedPinsCount ?&lt;/code&gt;ï¼Œä¸¢å¤± \x1b[31m${missedPinsCount}\x1b[0m ä¸ª&lt;code&gt;: &#39;&#39;
    }&lt;/code&gt;,
    downloadCount,
  )
}
```&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è·å–ç”»æ¿ä¸­å…¨éƒ¨pins(å›¾ç‰‡)æ•°æ®ã€‚æœ‰ä¸ªå…³é”®çš„ç‚¹ï¼Œè¯·æ±‚å¤´éƒ¨ä¸­å¦‚æœä¸åŠ ä¸Š &lt;code&gt;&#39;X-Requested-With&#39;: &#39;XMLHttpRequest&#39;&lt;/code&gt;ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ˜¯åŒ…å«jsonçš„HMLT Documentï¼Œè€Œä¸æ˜¯å•çº¯çš„ &lt;code&gt;json&lt;/code&gt; æ•°æ®ã€‚æˆ‘çœ‹åˆ°æœ‰äº›è„šæœ¬æ²¡æœ‰æ³¨æ„åˆ°è¿™ç‚¹ï¼Œå°±éœ€è¦ç”¨æ­£åˆ™æˆªå–HTMLä¸­çš„ &lt;code&gt;json&lt;/code&gt;ï¼Œå¤šèµ°äº†ä¸€æ­¥å¼¯è·¯ï¼ˆæˆ‘ä¹Ÿæ˜¯ä»å¼¯è·¯èµ°è¿‡æ¥çš„ï¼Œè¿™é‡Œæé†’åé¢çš„è¯»è€…ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å…³é”®å¤´éƒ¨ï¼Œæ·»åŠ è¯¥é¡¹åæœåŠ¡å™¨åªä¼šè¿”å›jsonæ•°æ®ï¼Œè€Œä¸æ˜¯åŒ…å«jsonçš„HTML
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;jsonRequestHeader&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nx&#34;&gt;Accept&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;s1&#34;&gt;&amp;#39;X-Requested-With&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;XMLHttpRequest&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boardId&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Promise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allPins&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;IPin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;loadPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lastPinId&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Promise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// limit æŸ¥è¯¢å‚æ•°é™åˆ¶è·å–çš„pinæ•°é‡ï¼Œæœ€å¤§100ï¼Œé»˜è®¤20
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;huabanDomain&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/boards/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boardId&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;max&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;lastPinId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;jsonRequestHeader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// if (response.headers[&amp;#39;content-type&amp;#39;]!.includes(&amp;#39;text/html&amp;#39;)) {
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//   // åŒ¹é… boards json ä¸²
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//   const boardJson: string = /app\.page\[&amp;#34;board&amp;#34;\]\s=\s({.*});/.exec(response)![1]
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//   board = JSON.parse(boardJson)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// }
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;allPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// å½“æ­¤æ¬¡è·å–çš„pinsä¸ºç©ºæˆ–è€…å…¨éƒ¨pinså·²è·å–å®Œï¼Œåˆ™è¿”å›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pinsChunkLength&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pinsChunkLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pin_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// ç”¨æœ€åä¸€ä¸ªpin idä½œä¸ºä¸‹ä¸€æ¬¡è¯·æ±‚çš„maxå€¼ï¼Œè¡¨ç¤ºè·å–è¯¥pinåé¢çš„pins
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;loadPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pinsChunkLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pin_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;loadPins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allPins&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ ¹æ® &lt;code&gt;pins&lt;/code&gt; ä¸‹è½½å›¾ç‰‡ã€‚è¿™é‡Œå¼•å…¥äº† &lt;code&gt;async&lt;/code&gt; å¼‚æ­¥åº“æ¥æ§åˆ¶åŒä¸€æ—¶é—´çš„ä¸‹è½½å¹¶å‘æ•°ï¼Œå¦åˆ™å¹¶å‘è¿‡é«˜&lt;strong&gt;Nodeä¼šå¤±å»å“åº”&lt;/strong&gt;ï¼›ä¸‹è½½å¤±è´¥çš„å›¾ç‰‡è¿˜ä¼šé‡è¯•ä¸€æ¬¡
```ts
async function downloadImage(allPins: IPin[], boardPath: string): Promise&lt;number&gt; {
let downloadCount: number = 0
const errorImageUrl: Array&amp;lt;{ url: string; path: string }&amp;gt; = []&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;// é‡è¯•ä¸‹è½½å¤±è´¥çš„å›¾ç‰‡
  function retry() {
    for (const image of errorImageUrl) {
      rp({
        uri: image.url,
        timeout: 20 * 1000,
        encoding: null, // make response a Buffer to write image correctly
      }).pipe(
        fs.createWriteStream(image.path).on(&amp;lsquo;finish&amp;rsquo;, () =&amp;gt; {
          totalDownload++
          console.log(&amp;rsquo;\x1b[32m Retry ok! \x1b[0m %s&amp;rsquo;, image.url)
        }),
      )
    }
  }&lt;/p&gt;

&lt;p&gt;function download(pin: IPin, cb: () =&amp;gt; void): void {
    const imageUrl: string = &lt;code&gt;${imageServer}/${pin.file.key}_fw658&lt;/code&gt;
    const imageName: string = &lt;code&gt;${pin.pin_id}${imagesTypes[pin.file.type] || &#39;.jpg&#39;}&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;rp({
  uri: imageUrl,
  timeout: 20 * 1000,
  encoding: null, // make response a Buffer to write image correctly
})
  .then(data =&amp;gt; {
    downloadCount++

    fs.writeFile(`${boardPath}/${imageName}`, data, error =&amp;gt; {
      error &amp;amp;&amp;amp; console.error(&amp;#39;\x1b[31m%s\x1b[0m%s&amp;#39;, error.message, imageUrl)
    })
  })
  .catch(error =&amp;gt; {
    console.error(&amp;#39;\x1b[31m%s %s.\x1b[0m %s&amp;#39;, &amp;#39;Download image failed.&amp;#39;, error.message, imageUrl)
    errorImageUrl.push({ url: imageUrl, path: `${boardPath}/${imageName}` })
  })
  .finally(cb)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;// asyncæ§åˆ¶å¹¶å‘ä¸‹è½½æ•°ï¼Œå¦åˆ™å¹¶å‘æ•°å¤ªé«˜Nodeä¼šå¤±å»å“åº”
  return new Promise&lt;number&gt;(resolve =&amp;gt; {
    // åŒä¸€æ—¶é—´æœ€å¤šæœ‰10ä¸ª(ä¸èƒ½å¤ªé«˜)å¹¶å‘è¯·æ±‚
    async.eachLimit(allPins, 10, download, (error: IError | undefined) =&amp;gt; {
      if (error) {
        throw error
      }
      errorImageUrl.length &amp;amp;&amp;amp; retry()
      resolve(downloadCount)
    })
  })
}
```&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä¸‹è½½çš„å›¾ç‰‡ä¼šä¿å­˜åœ¨é»˜è®¤ &lt;code&gt;images&lt;/code&gt; ç›®å½•æˆ–è€…ç”¨æˆ·è¾“å…¥çš„æŒ‡å®šç›®å½•ä¸­ï¼Œä¸‹è½½é€Ÿåº¦å¹³å‡ 5 å¼ /ç§’&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;è¾“å…¥ç”¨æˆ·idä¸‹è½½è¯¥ç”¨æˆ·æ‰€æœ‰è‡ªå»ºç”»æ¿çš„å›¾ç‰‡-ä¸åŒ…æ‹¬æ”¶è—çš„ç”»æ¿&#34;&gt;è¾“å…¥ç”¨æˆ·IDä¸‹è½½è¯¥ç”¨æˆ·æ‰€æœ‰è‡ªå»ºç”»æ¿çš„å›¾ç‰‡ï¼ˆä¸åŒ…æ‹¬æ”¶è—çš„ç”»æ¿ï¼‰&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å‘½ä»¤è¡Œä¸­è¾“å…¥ç”¨æˆ·ID&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;nx&#34;&gt;rl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;è¯·è¾“å…¥åœ°å€æ ä¸­çš„ç”¨æˆ·åï¼š&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;username&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆè·å–åˆ°è¯¥ç”¨æˆ·çš„æ‰€æœ‰ç”»æ¿æ•°æ®ï¼Œç„¶åé¡ºåºä¸‹è½½æ¯ä¸ªç”»æ¿ä¸­çš„å›¾ç‰‡
```ts
async function downloadBoardsOfUser(username: string): Promise&lt;void&gt; {
console.time(&amp;lsquo;Total time&amp;rsquo;)
const userBoards: IBoard[] = await getUserBoards(username)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;console.log(&amp;rsquo;\nç”¨æˆ· [%s] ç”»æ¿æ•°é‡ï¼š%d&amp;rsquo;, username, userBoards.length)&lt;/p&gt;

&lt;p&gt;// é¡ºåºä¸‹è½½ç”»æ¿ï¼Œå¹¶è¡Œä¸‹è½½ä¼šå¤±æ§
  for (const board of userBoards) {
    console.log(
      &amp;lsquo;\nå¼€å§‹ä¸‹è½½ç”»æ¿ï¼š[%s - %s]ï¼Œå›¾ç‰‡æ•°é‡ï¼š%d&amp;rsquo;,
      board.board_id,
      board.title,
      board.pin_count,
    )
    await getPinsAndDownload(board)
  }&lt;/p&gt;

&lt;p&gt;outputResult()
}
```&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è·å–ç”¨æˆ·ç”»æ¿ã€‚ç”¨æˆ·ç”»æ¿ä¹Ÿä½¿ç”¨äº†æ‡’åŠ è½½æ–¹å¼ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å»å¾ªç¯è·å–&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span class=&#34;nx&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getUserBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;username&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Promise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IBoard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allUserBoards&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;IBoard&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lastBoardId?&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Promise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;err?&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;number&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;user?&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;IUser&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;huabanDomain&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;/`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;limit&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;max&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;lastBoardId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;jsonRequestHeader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ç”¨æˆ·ä¸å­˜åœ¨ï¼&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ç”¨æˆ·æ²¡æœ‰ç”»æ¿ï¼&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;IUser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;requestUserBoardsCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;allUserBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// è·å–æ‰€æœ‰ç”»æ¿æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;requestUserBoardsCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allUserBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;boards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;requestUserBoardsCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;board_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;nx&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getBoards&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allUserBoards&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;åé¢æ­¥éª¤è·Ÿæ–¹å¼ä¸€ç›¸åŒï¼Œè¿™é‡Œåªæ˜¯ä½¿ç”¨ &lt;code&gt;for&lt;/code&gt; å¾ªç¯ä¸‹è½½å¤šä¸ªç”»æ¿å›¾ç‰‡&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;è¿™æ¬¡çˆ¬è™«å‡ ä¹æ²¡æœ‰é‡åˆ°æœåŠ¡å™¨çš„åæŠ—ï¼ŒèŠ±ç“£ç½‘æ²¡æœ‰åšåçˆ¬è™«æ£€æµ‹ï¼Œæœ€åŸºæœ¬çš„ &lt;code&gt;User-Agent&lt;/code&gt; éƒ½ä¸éœ€è¦ä¼ªè£…ï¼Œå¾ˆé€‚åˆçˆ¬è™«åˆå­¦è€…æ‹¿æ¥ç»ƒæ‰‹ï¼›è¿™ç§å¼€æ”¾å…±äº«çš„ç²¾ç¥å€¼å¾—è¡¨æ‰¬ğŸ‘ã€‚&lt;/p&gt;

&lt;p&gt;é—ç•™ä¸‹äº†æœ‰äº›ç”»æ¿ &lt;code&gt;pins&lt;/code&gt; æ•°æ®ä¸å…¨çš„é—®é¢˜ï¼Œç­‰å¾…æœ‰ç¼˜å†è§£å†³ã€‚&lt;/p&gt;

&lt;h2 id=&#34;github-project&#34;&gt;Github Project&lt;/h2&gt;

&lt;p&gt;é¡¹ç›®å¼•å…¥äº† &lt;code&gt;TSLint&lt;/code&gt;ã€&lt;code&gt;Prettier&lt;/code&gt; æ¥è§„èŒƒä»£ç é£æ ¼ï¼Œç”¨ &lt;code&gt;ts-node&lt;/code&gt; æ¥æ‰§è¡Œ &lt;code&gt;.ts&lt;/code&gt; ç¨‹åºï¼›&lt;/p&gt;

&lt;p&gt;ä»£ç æ”¾åˆ°Githubä¸Šäº† â¡ &lt;a href=&#34;https://github.com/Jancat/huaban-crawl&#34;&gt;Jancat/huaban-crawl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Enjoy the pictures ~&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
  </channel>
</rss>
